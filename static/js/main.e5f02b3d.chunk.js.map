{"version":3,"sources":["components/app/app.module.css","pages/home.module.css","components/burger-ingredients/ingredients-tabs/ingredients-tabs.module.css","components/burger-constructor/burger-constructor.module.css","components/auth-form/auth-form.module.css","pages/login.module.css","pages/notFound.module.css","components/profile/profile-history/profile-history.module.css","components/ingredient-details/ingredient-details.module.css","components/app-header/app-header-item/app-header-item.tsx","components/app-header/app-header.tsx","services/hooks.ts","components/protected-route/ProtectedRoute.tsx","components/burger-ingredients/ingredients-tabs/ingredients-tabs.tsx","services/constants.ts","components/burger-ingredients/ingredient/ingredient.tsx","components/burger-ingredients/ingredients/ingredients.tsx","components/burger-ingredients/burger-ingredients.tsx","components/burger-constructor/constructor-ingredient/constructor-ingredient.tsx","components/burger-constructor/constructor-list/constructor-list.tsx","components/modal/modal-overlay.tsx","components/modal/modal.tsx","images/done.svg","utils/index.ts","services/actions/order-details.ts","components/order-details/order-details.tsx","components/burger-constructor/constructor-cart/constructor-cart.tsx","components/burger-constructor/burger-constructor.tsx","pages/home.tsx","components/auth-form/auth-form.tsx","services/api.ts","services/actions/auth.ts","pages/login.tsx","pages/notFound.tsx","pages/register.tsx","pages/forgotPassword.tsx","pages/resetPassword.tsx","components/profile/profile-edit/profile-edit.tsx","services/action-types/wsActionTypes.ts","components/circle-ingredient/circle-ingredient.tsx","components/feed/feed-order/feed-order.tsx","components/profile/profile-history/profile-history.tsx","components/profile/profile.tsx","pages/profile.tsx","pages/ingredient.tsx","components/feed/feed.tsx","components/feed/orders/orders.tsx","pages/orderFeed.tsx","components/ingredient-details/ingredient-details.tsx","services/actions/burger-ingredients.ts","components/app/app.tsx","reportWebVitals.ts","services/reducers/burger-ingredients.ts","services/reducers/constructor-list.ts","services/reducers/ingredient-details.ts","services/reducers/order-details.ts","services/reducers/auth.ts","services/reducers/wsFeedReducer.ts","services/reducers/wsUserFeedReducer.ts","services/reducers/index.ts","index.jsx","services/middlewares/socketMiddleware.ts","pages/ingredient.module.css","pages/profile.module.css","components/feed/orders/orders.module.css","components/order-details/order-details.module.css","components/feed/feed-order/feed-order.module.css","pages/order.module.css","components/burger-constructor/constructor-list/constructor-list.module.css","components/modal/popup.module.css","pages/register.module.css","components/app-header/app-header.module.css","components/profile/profile-edit/profile-edit.module.css","components/feed/feed.module.css","components/burger-ingredients/ingredients/ingredients.module.css","components/burger-ingredients/ingredient/ingredient.module.css","components/circle-ingredient/circle-ingredient.module.css","components/app-header/app-header-item/app-header-item.module.css","components/burger-ingredients/burger-ingredients.module.css","components/burger-constructor/constructor-cart/constructor-cart.module.css","components/order-ingredient/order-ingredient.module.css"],"names":["module","exports","AppHeaderItem","text","path","setHover","children","textColor","useLocation","pathname","className","itemStyles","header__item","to","header__iconWrapper","header__link","onMouseEnter","onMouseLeave","AppHeader","useState","main","setMainActive","orders","setOrdersActive","profile","setProfileActive","headerStyles","header","header__nav","header__list","type","header__logo","useSelector","selectorHook","useDispatch","dispatchHook","ProtectedRoute","rest","user","state","auth","location","render","IngredientsTabs","activeMeal","changeMeal","tabsStyles","ingredients__tabs","value","active","onClick","REQUEST_URL","WS_URL","GET_USER_SUCCESS","GET_USER_FAILED","SET_USER","REGISTER_USER","REGISTER_USER_SUCCESS","REGISTER_USER_FAILED","AUTHORIZE_USER","AUTHORIZE_USER_SUCCESS","AUTHORIZE_USER_FAILED","REFRESH_TOKEN","REFRESH_TOKEN_SUCCESS","REFRESH_TOKEN_FAILED","LOGOUT","LOGOUT_SUCCESS","LOGOUT_FAILED","SET_PASSWORD_RESET","GET_INGREDIENTS","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","SET_ACTIVE_TAB","INCREASE_INGREDIENT_COUNT","DECREASE_INGREDIENT_COUNT","ADD_INGREDIENT","REMOVE_INGREDIENT","SET_TOTAL","SET_INGREDIENT_INDEX","SET_INGREDIENTS_IDS","MOVE_CARD","SET_INGREDIENT_DETAILS","REMOVE_INGREDIENT_DETAILS","GET_ORDER_NUMBER","GET_ORDER_NUMBER_SUCCESS","GET_ORDER_NUMBER_FAILED","RESET_ORDER_NUMBER","Ingredient","ingredient","useDrag","item","ingredientRef","_id","background","ref","ingredientStyles","src","image","alt","name","ingredient__priceWrapper","ingredient__price","price","ingredient__name","ingredientCount","count","size","Ingredients","data","dispatch","tabScrollChange","inView","entry","tab","target","firstElementChild","innerHTML","ingredients","as","threshold","onChange","ingredients__list","map","BurgerIngredients","isLoading","ingredientsRequest","hasError","ingredientsFailed","activeTab","ingredientsContent","ingredientsStyles","ingredients__loading","length","meal","mealType","ConstructorIngredient","memo","index","moveCard","setIngredientsIndex","cardRef","useRef","useDrop","accept","hover","monitor","dragIndex","hoverIndex","hoverBoundingRect","current","getBoundingClientRect","console","log","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","drop","collect","isDragging","drag","useEffect","opacity","style","e","id","closest","ingredientId","removeIngredient","listStyles","thumbnail","ConstructorList","bun","burger","atIndex","listRef","cartTotal","useCallback","total","forEach","setIngredientsIDs","ingredientsIDs","concat","IDs","topBunMarkup","bothSides","isLocked","bottomBunMarkup","ingredientsMarkup","constructorList","renderIngredients","content","Object","keys","onDrop","preventDefault","commonList","ModalOverlay","onClose","popupStyles","popup__overlay","modalRoot","document","getElementById","Modal","title","onEscKeyDown","key","addEventListener","removeEventListener","createPortal","popup__content","stopPropagation","popup__base","popup__title","popup__cross","formHandler","setForm","form","setCookie","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","dataFunc","date","result","currentDate","isToday","isYesterday","formatDistanceToNow","locale","ru","format","orderSumFunc","currentIgd","find","getOrderNumber","orderIDs","token","fetch","method","headers","authorization","body","JSON","stringify","then","res","ok","json","number","order","catch","OrderDetails","ingredientIDs","orderNumber","orderNumberRequest","orderNumberFailed","orderStyles","order__text_type_centered","order__number","order__done","doneButton","ConstructorCart","visibleModal","setVisibleModal","history","useHistory","modal","totalStyles","constructor__total","constructor__price","BurgerConstructor","constructorStyles","constructor","HomePage","homeStyles","DndProvider","backend","HTML5Backend","AuthForm","formStyles","checkResponse","err","Promise","reject","fetchWithRefresh","url","options","a","message","localStorage","getItem","refreshData","setItem","refreshToken","accessToken","Authorization","actionCreators","passwordIsReset","LoginPage","passwordInputIcon","setIcon","email","password","passwordRef","onIconClick","login","mode","cache","credentials","redirect","referrerPolicy","split","loginRequest","loginStyles","onSubmit","placeholder","icon","auth__text","auth__link","NotFoundPage","notFoundStyles","notFound","RegisterPage","register","registerRequest","registerStyles","emailPattern","ForgotPasswordPage","setEmail","error","setError","isPasswordReset","passwordReset","success","forgotPassword","errorText","ResetPasswordPage","setPassword","code","setCode","passError","setPassError","codeError","setCodeError","resetPassword","onFocusInput","inputRef","classList","add","styles","input_isActive","onBlurInput","remove","focus","ProfileEdit","nameRef","loginRef","resetChanges","updateInfo","Error","updateUserInfo","inputs","onFocus","onBlur","info_change","info_cancel","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","indexCreator","zIndex","CircleIngredient","totalIngrds","total_ingredients","image_background","FeedOrder","store","renderIngredientsImages","ingredientsArray","ingredientID","ImageElement","ingredientsLength","currentIngredient","formatedIngredientsIDs","cuttedIDs","slice","images","reverse","price_icon","ProfileHistory","userFeed","payload","createdAt","Profile","ProfilePage","activeRouteHandler","profileStyles","profile__link_isActive","profile__link","logout","removeItem","profile__list","profile__item","currentIngredients","setCurrentIngredient","useParams","filter","image_large","content__row","ingredient__details","calories","proteins","fat","carbohydrates","Feed","feed","feedStyles","list","Orders","totalToday","readyOrders","status","cookingOrders","orders__list","orders__item_done","orders__item","digits_shadow","OrderFeedPage","IngredientDetails","detailsStyles","App","getUserInfo","modalIngredientOpen","action","exact","goBack","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","ConstructorInitialState","IngredientInitialState","initialUserState","userDataRequest","userDataFailed","wsConnected","rootReducer","combineReducers","ingredientOrderCount","dragIngredient","i","newIngredients","splice","details","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","socket","next","WebSocket","readyState","close","onopen","onerror","event","onmessage","parsedData","parse","restData","onclose","wasClean","thunk","createStore","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.e5f02b3d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"app_main__3yfFw\",\"centered\":\"app_centered__8OSiy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"home_main__3hh9x\",\"centered\":\"home_centered__33pkz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients__tabs\":\"ingredients-tabs_ingredients__tabs__xvA8f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor\":\"burger-constructor_constructor__2Wifa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"auth-form_auth__3BJcu\",\"auth__text\":\"auth-form_auth__text__VY6oV\",\"auth__link\":\"auth-form_auth__link__1no8Q\",\"form\":\"auth-form_form__1d4QB\",\"title\":\"auth-form_title__3QMLn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"login_main__1908J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notFound\":\"notFound_notFound__3Xw7x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile-history_main__3tCDd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient__details\":\"ingredient-details_ingredient__details__2WGWX\"};","import React, { FC } from 'react';\n\nimport itemStyles from './app-header-item.module.css';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport { TAppHeaderItemProps } from './app-header-item-types';\nimport { TLocationState } from '../app-header-types';\n\nconst AppHeaderItem: FC<TAppHeaderItemProps> = ({ text, path = '/', setHover, children }) => {\n    const { pathname } = useLocation<TLocationState>();\n\n    const textColor = pathname !== path ? 'text_color_inactive' : '';\n\n    return (\n        <li className={`mt-4 mb-4 pt-4 pb-4 pl-5 pr-5 ${itemStyles.header__item}`}>\n            <NavLink to={path} className={children ? `mr-2 ${itemStyles.header__iconWrapper}` : ''}>\n                {children}\n                <p\n                    className={`text text_type_main-default ${textColor} ${itemStyles.header__link}`}\n                    onMouseEnter={() => setHover(true)}\n                    onMouseLeave={() => setHover(false)}\n                >\n                    {text}\n                </p>\n            </NavLink>\n        </li>\n    );\n};\n\nexport default AppHeaderItem;\n","import React, { FC, useState } from 'react';\n\nimport headerStyles from './app-header.module.css';\n\nimport AppHeaderItem from './app-header-item/app-header-item';\nimport { BurgerIcon, ListIcon, ProfileIcon, Logo } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, useLocation } from 'react-router-dom';\nimport { TLocationState } from './app-header-types';\n\nconst AppHeader: FC = () => {\n    const { pathname } = useLocation<TLocationState>();\n    const [main, setMainActive] = useState<boolean>(false);\n    const [orders, setOrdersActive] = useState<boolean>(false);\n    const [profile, setProfileActive] = useState<boolean>(false);\n\n    return (\n        <header className={headerStyles.header}>\n            <nav className={headerStyles.header__nav}>\n                <ul className={headerStyles.header__list}>\n                    <AppHeaderItem text=\"Конструктор\" path=\"/react-burger/\" setHover={setMainActive}>\n                        <BurgerIcon type={pathname === '/react-burger/' || main ? 'primary' : 'secondary'} />\n                    </AppHeaderItem>\n                    <AppHeaderItem text=\"Лента заказов\" path=\"/react-burger/feed\" setHover={setOrdersActive}>\n                        <ListIcon type={pathname === '/react-burger/feed' || orders ? 'primary' : 'secondary'} />\n                    </AppHeaderItem>\n                    <li className={`mt-4 mb-4 ${headerStyles.header__logo}`}>\n                        <Link className={headerStyles.header__link} to=\"/\">\n                            <Logo />\n                        </Link>\n                    </li>\n                    <AppHeaderItem text=\"Личный кабинет\" path=\"/react-burger/profile\" setHover={setProfileActive}>\n                        <ProfileIcon type={pathname === '/react-burger/profile' || profile ? 'primary' : 'secondary'} />\n                    </AppHeaderItem>\n                </ul>\n            </nav>\n        </header>\n    );\n};\n\nexport default AppHeader;\n","import { TypedUseSelectorHook, useDispatch as dispatchHook, useSelector as selectorHook } from 'react-redux';\nimport { AppDispatch, AppThunk, RootState } from './thunk-types';\n\n// Теперь этот хук «знает» структуру хранилища\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\n\n// Хук не даст отправить экшен, который ему не знаком\nexport const useDispatch = (): AppDispatch | AppThunk => dispatchHook<AppDispatch | AppThunk>();\n","import React, { FC } from 'react';\n\nimport { Redirect, Route, useLocation } from 'react-router-dom';\nimport { useSelector } from '../../services/hooks';\nimport { CommonStateType } from '../../services/reducers/reducers-types';\n\ntype TProtectedRouteProps = { path: string; exact: boolean };\n\nconst ProtectedRoute: FC<TProtectedRouteProps> = ({ children, path, ...rest }) => {\n    const user = useSelector((state: CommonStateType) => state.auth.user);\n    const location = useLocation();\n\n    // if (!user && path === '/profile/orders') {\n    //     return (\n    //         <Redirect\n    //             to={{\n    //                 pathname: '/login',\n    //             }}\n    //         />\n    //     );\n    // }\n\n    const profilePages: string = '/profile' || '/profile/orders';\n\n    if (\n        user &&\n        (path === '/login' || path === '/register' || path === '/forgot-password' || path === '/reset-password')\n    ) {\n        return (\n            <Redirect\n                to={{\n                    pathname: '/',\n                    state: location,\n                }}\n            />\n        );\n    }\n\n    return (\n        <Route\n            {...rest}\n            render={() => (!user && path === profilePages ? <Redirect to={{ pathname: '/login' }} /> : children)}\n        />\n    );\n};\n\nexport default ProtectedRoute;\n","import React, { FC } from 'react';\n\nimport tabsStyles from './ingredients-tabs.module.css';\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { TIngredientsTabs } from './ingredients-tabs-types';\n\nconst IngredientsTabs: FC<TIngredientsTabs> = ({ activeMeal, changeMeal }) => {\n    return (\n        <div className={tabsStyles.ingredients__tabs}>\n            <Tab value=\"Булки\" active={activeMeal === 'Булки'} onClick={changeMeal}>\n                Булки\n            </Tab>\n            <Tab value=\"Соусы\" active={activeMeal === 'Соусы'} onClick={changeMeal}>\n                Соусы\n            </Tab>\n            <Tab value=\"Начинки\" active={activeMeal === 'Начинки'} onClick={changeMeal}>\n                Начинки\n            </Tab>\n        </div>\n    );\n};\n\nexport default IngredientsTabs;\n","const REQUEST_URL = 'https://norma.nomoreparties.space/api' as const;\nconst WS_URL = 'wss://norma.nomoreparties.space/orders' as const;\n\nconst GET_USER_SUCCESS = 'GET_USER_SUCCESS' as const;\nconst GET_USER_FAILED = 'GET_USER_FAILED' as const;\nconst SET_USER = 'SET_USER' as const;\nconst REGISTER_USER = 'REGISTER_USER' as const;\nconst REGISTER_USER_SUCCESS = 'REGISTER_USER_SUCCESS' as const;\nconst REGISTER_USER_FAILED = 'REGISTER_USER_FAILED' as const;\nconst AUTHORIZE_USER = 'AUTHORIZE_USER' as const;\nconst AUTHORIZE_USER_SUCCESS = 'AUTHORIZE_USER_SUCCESS' as const;\nconst AUTHORIZE_USER_FAILED = 'AUTHORIZE_USER_FAILED' as const;\nconst REFRESH_TOKEN = 'REFRESH_TOKEN' as const;\nconst REFRESH_TOKEN_SUCCESS = 'REFRESH_TOKEN_SUCCESS' as const;\nconst REFRESH_TOKEN_FAILED = 'REFRESH_TOKEN_FAILED' as const;\nconst LOGOUT = 'LOGOUT' as const;\nconst LOGOUT_SUCCESS = 'LOGOUT_SUCCESS' as const;\nconst LOGOUT_FAILED = 'LOGOUT_FAILED' as const;\nconst SET_PASSWORD_RESET = 'SET_PASSWORD_RESET' as const;\nconst GET_INGREDIENTS = 'GET_INGREDIENTS' as const;\nconst GET_INGREDIENTS_SUCCESS = 'GET_INGREDIENTS_SUCCESS' as const;\nconst GET_INGREDIENTS_FAILED = 'GET_INGREDIENTS_FAILED' as const;\nconst SET_ACTIVE_TAB = 'SET_ACTIVE_TAB' as const;\nconst INCREASE_INGREDIENT_COUNT = 'INCREASE_INGREDIENT_COUNT' as const;\nconst DECREASE_INGREDIENT_COUNT = 'DECREASE_INGREDIENT_COUNT' as const;\nconst ADD_INGREDIENT = 'ADD_INGREDIENT' as const;\nconst REMOVE_INGREDIENT = 'REMOVE_INGREDIENT' as const;\nconst SET_TOTAL = 'SET_TOTAL' as const;\nconst SET_INGREDIENT_INDEX = 'SET_INGREDIENT_INDEX' as const;\nconst SET_INGREDIENTS_IDS = 'SET_INGREDIENTS_IDS' as const;\nconst MOVE_CARD = 'MOVE_CARD' as const;\nconst SET_INGREDIENT_DETAILS = 'SET_INGREDIENT_DETAILS' as const;\nconst REMOVE_INGREDIENT_DETAILS = 'REMOVE_INGREDIENT_DETAILS' as const;\nconst GET_ORDER_NUMBER = 'GET_ORDER_NUMBER' as const;\nconst GET_ORDER_NUMBER_SUCCESS = 'GET_ORDER_NUMBER_SUCCESS' as const;\nconst GET_ORDER_NUMBER_FAILED = 'GET_ORDER_NUMBER_FAILED' as const;\nconst RESET_ORDER_NUMBER = 'RESET_ORDER_NUMBER' as const;\n\nexport {\n    REQUEST_URL,\n    WS_URL,\n    GET_USER_SUCCESS,\n    GET_USER_FAILED,\n    SET_USER,\n    REGISTER_USER,\n    REGISTER_USER_SUCCESS,\n    REGISTER_USER_FAILED,\n    AUTHORIZE_USER,\n    AUTHORIZE_USER_SUCCESS,\n    AUTHORIZE_USER_FAILED,\n    REFRESH_TOKEN,\n    REFRESH_TOKEN_SUCCESS,\n    REFRESH_TOKEN_FAILED,\n    LOGOUT,\n    LOGOUT_SUCCESS,\n    LOGOUT_FAILED,\n    SET_PASSWORD_RESET,\n    GET_INGREDIENTS,\n    GET_INGREDIENTS_SUCCESS,\n    GET_INGREDIENTS_FAILED,\n    SET_ACTIVE_TAB,\n    INCREASE_INGREDIENT_COUNT,\n    DECREASE_INGREDIENT_COUNT,\n    ADD_INGREDIENT,\n    REMOVE_INGREDIENT,\n    SET_TOTAL,\n    SET_INGREDIENT_INDEX,\n    SET_INGREDIENTS_IDS,\n    MOVE_CARD,\n    SET_INGREDIENT_DETAILS,\n    REMOVE_INGREDIENT_DETAILS,\n    GET_ORDER_NUMBER,\n    GET_ORDER_NUMBER_SUCCESS,\n    GET_ORDER_NUMBER_FAILED,\n    RESET_ORDER_NUMBER,\n};\n","import React, { FC } from 'react';\n\nimport { useDrag } from 'react-dnd';\n\nimport ingredientStyles from './ingredient.module.css';\nimport { Counter, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, useLocation } from 'react-router-dom';\nimport { TIngredientProps } from './ingredient-types';\n\nconst Ingredient: FC<TIngredientProps> = ({ ingredient }) => {\n    const [, ingredientRef] = useDrag({\n        type: 'ingredient',\n        item: ingredient,\n    });\n    const location = useLocation();\n\n    return (\n        <Link\n            to={{\n                pathname: `/ingredients/${ingredient._id}`,\n                state: { background: location },\n            }}\n            ref={ingredientRef}\n            className={ingredientStyles.ingredient}\n        >\n            <img src={ingredient.image} alt={ingredient.name} />\n            <div className={`${ingredientStyles.ingredient__priceWrapper} text text_type_digits-default mt-1 mb-1`}>\n                <p className={`${ingredientStyles.ingredient__price} mr-2`}>{ingredient.price}</p>\n                <CurrencyIcon type=\"primary\" />\n            </div>\n            <p className={`text text_type_main-default ${ingredientStyles.ingredient__name}`}>{ingredient.name}</p>\n            {ingredient.ingredientCount && ingredient.ingredientCount > 0 ? (\n                <Counter count={ingredient.ingredientCount} size=\"default\" />\n            ) : null}\n        </Link>\n    );\n};\n\nexport default Ingredient;\n","import React, { FC } from 'react';\nimport { useDispatch } from '../../../services/hooks';\nimport { InView } from 'react-intersection-observer';\n\nimport { SET_ACTIVE_TAB } from '../../../services/constants';\nimport ingredientStyles from './ingredients.module.css';\nimport Ingredient from '../ingredient/ingredient';\nimport { TIngredientsProps, TTabScrollChange } from './ingredients-types';\n\nconst Ingredients: FC<TIngredientsProps> = ({ data }) => {\n    const dispatch = useDispatch();\n\n    const tabScrollChange: TTabScrollChange = (inView, entry) => {\n        if (inView) {\n            dispatch({\n                type: SET_ACTIVE_TAB,\n                tab: entry.target.firstElementChild?.innerHTML,\n            });\n        }\n    };\n\n    return (\n        <div className={`${ingredientStyles.ingredients} mt-10 mb-6 pl-1 pr-1`}>\n            {' '}\n            {\n                <>\n                    <InView as=\"div\" threshold={0.8} onChange={tabScrollChange}>\n                        <h4 className=\"text text_type_main-medium mb-6\">Булки</h4>\n                        <ul className={ingredientStyles.ingredients__list}>\n                            {data.map((item) => {\n                                if (item.type !== 'bun') return null;\n                                return <Ingredient key={item._id} ingredient={item} />;\n                            })}\n                        </ul>\n                    </InView>\n                    <InView as=\"div\" threshold={0.5} onChange={tabScrollChange}>\n                        <h4 className=\"text text_type_main-medium mb-6\">Соусы</h4>\n                        <ul className={ingredientStyles.ingredients__list}>\n                            {data.map((item) => {\n                                if (item.type !== 'sauce') return null;\n                                return <Ingredient key={item._id} ingredient={item} />;\n                            })}\n                        </ul>\n                    </InView>\n                    <InView as=\"div\" threshold={0.2} onChange={tabScrollChange}>\n                        <h4 className=\"text text_type_main-medium mb-6\">Начинки</h4>\n                        <ul className={ingredientStyles.ingredients__list}>\n                            {data.map((item) => {\n                                if (item.type !== 'main') return null;\n                                return <Ingredient key={item._id} ingredient={item} />;\n                            })}\n                        </ul>\n                    </InView>\n                </>\n            }\n        </div>\n    );\n};\n\nexport default Ingredients;\n","import React, { ReactElement } from 'react';\nimport { useDispatch, useSelector } from '../../services/hooks';\n\nimport ingredientsStyles from './burger-ingredients.module.css';\nimport IngredientsTabs from './ingredients-tabs/ingredients-tabs';\nimport Ingredients from './ingredients/ingredients';\nimport { SET_ACTIVE_TAB } from '../../services/constants';\nimport { CommonStateType } from '../../services/reducers/reducers-types';\n\nconst BurgerIngredients = (): ReactElement => {\n    const { ingredients, isLoading, hasError, activeTab } = useSelector((state: CommonStateType) => ({\n        ingredients: state.ingredients.ingredients,\n        isLoading: state.ingredients.ingredientsRequest,\n        hasError: state.ingredients.ingredientsFailed,\n        activeTab: state.ingredients.activeTab,\n    }));\n    const dispatch = useDispatch();\n\n    const onTabClick = (meal: string) => {\n        let mealType = '';\n        switch (meal) {\n            case 'Булки':\n                mealType = 'Булки';\n                break;\n            case 'Соусы':\n                mealType = 'Соусы';\n                break;\n            case 'Начинки':\n                mealType = 'Начинки';\n                break;\n            default:\n                mealType = 'Булки';\n                break;\n        }\n        dispatch({\n            type: SET_ACTIVE_TAB,\n            tab: mealType,\n        });\n    };\n\n    const ingredientsContent = hasError ? (\n        <div className={`text text_type_main-medium ${ingredientsStyles.ingredients__loading}`}>\n            Что-то пошло не так, перезагрузите страницу\n        </div>\n    ) : !isLoading && !hasError && ingredients.length ? (\n        <Ingredients data={ingredients} />\n    ) : (\n        <div className={`text text_type_main-large ${ingredientsStyles.ingredients__loading}`}>\n            Здесь Вы увидите ингредиенты для бургера ...\n        </div>\n    );\n\n    return (\n        <section className={`${ingredientsStyles.ingredients} ml-5 mr-10 pt-10`}>\n            <h2 className=\"text text_type_main-large pb-2\">Соберите бургер</h2>\n            <IngredientsTabs activeMeal={activeTab} changeMeal={onTabClick} />\n            {ingredientsContent}\n        </section>\n    );\n};\n\nexport default BurgerIngredients;\n","import React, { memo, useEffect, useRef, FC, SyntheticEvent } from 'react';\n\nimport { useDispatch } from '../../../services/hooks';\nimport { useDrag, useDrop } from 'react-dnd';\n\nimport listStyles from '../constructor-list/constructor-list.module.css';\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { DECREASE_INGREDIENT_COUNT, REMOVE_INGREDIENT } from '../../../services/constants';\nimport { TConstructorIngredient } from './constructor-ingredient-types';\n\n// eslint-disable-next-line react/display-name\nexport const ConstructorIngredient: FC<TConstructorIngredient> = memo(\n    // eslint-disable-next-line react/prop-types\n    ({ ingredient, index, moveCard, setIngredientsIndex }) => {\n        const cardRef = useRef<HTMLElement>(null);\n        // eslint-disable-next-line react/prop-types\n        const { _id, name, price, image } = ingredient;\n        const dispatch = useDispatch();\n        const [, drop] = useDrop({\n            accept: 'card',\n            hover: (item: { index: number }, monitor) => {\n                const dragIndex = item.index;\n                const hoverIndex = index;\n\n                // Don't replace items with themselves\n                if (dragIndex === hoverIndex) {\n                    return;\n                }\n                // Determine rectangle on screen\n                const hoverBoundingRect: any = cardRef.current?.getBoundingClientRect();\n                console.log(hoverBoundingRect);\n                // Get vertical middle\n                const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n                // Determine mouse position\n                const clientOffset:\n                    | {\n                          x: number;\n                          y: number;\n                      }\n                    | any = monitor.getClientOffset();\n                // Get pixels to the top\n                const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n                // Only perform the move when the mouse has crossed half of the items height\n                // When dragging downwards, only move when the cursor is below 50%\n                // When dragging upwards, only move when the cursor is above 50%\n                // Dragging downwards\n                if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n                    return;\n                }\n                // Dragging upwards\n                if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n                    return;\n                }\n\n                moveCard(dragIndex, hoverIndex);\n\n                item.index = hoverIndex;\n            },\n        });\n        const [{ isDragging }, drag] = useDrag({\n            type: 'card',\n            item: () => {\n                return {\n                    _id,\n                    index,\n                };\n            },\n            collect: (monitor) => ({\n                isDragging: monitor.isDragging(),\n            }),\n        });\n\n        const removeIngredient = (e: SyntheticEvent, id: string, index: number) => {\n            const target = e.target as HTMLElement;\n            if (target.closest('.constructor-element__action')) {\n                dispatch({\n                    type: REMOVE_INGREDIENT,\n                    id: id,\n                    index: index,\n                });\n                dispatch({\n                    type: DECREASE_INGREDIENT_COUNT,\n                    ingredientId: _id,\n                });\n            }\n        };\n\n        useEffect(() => {\n            setIngredientsIndex();\n            // eslint-disable-next-line react/prop-types\n        }, [ingredient.index, setIngredientsIndex]);\n\n        const opacity = isDragging ? 0 : 1;\n        drag(drop(cardRef));\n\n        return (\n            <article\n                ref={cardRef}\n                style={{ opacity }}\n                onClick={(e) => removeIngredient(e, _id, index)}\n                className={listStyles.item}\n            >\n                <DragIcon type=\"primary\" />\n                <ConstructorElement text={name} price={price} thumbnail={image} />\n            </article>\n        );\n    },\n);\n","import React, { memo, useEffect, useCallback, FC } from 'react';\nimport { useDispatch, useSelector } from '../../../services/hooks';\nimport { useDrop } from 'react-dnd';\n\n// TODO\n// - изменить логику счетчиков у ингредиентов (сделать чтобы они просто сравнивали массивы свои и массив бургера и по итогу выдавали результат счетчиков)\n\nimport { ConstructorIngredient } from '../constructor-ingredient/constructor-ingredient';\nimport {\n    SET_TOTAL,\n    SET_INGREDIENTS_IDS,\n    ADD_INGREDIENT,\n    MOVE_CARD,\n    SET_INGREDIENT_INDEX,\n} from '../../../services/constants';\nimport { INCREASE_INGREDIENT_COUNT } from '../../../services/constants';\nimport { CommonStateType } from '../../../services/reducers/reducers-types';\nimport { TIngredient } from '../../burger-ingredients/ingredient/ingredient-types';\nimport { TMoveCard } from './constructor-list-types';\n\nimport listStyles from './constructor-list.module.css';\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\n\n// eslint-disable-next-line react/display-name\nexport const ConstructorList: FC = memo(() => {\n    const { bun, ingredients } = useSelector((state: CommonStateType) => ({\n        bun: state.burger.bun,\n        ingredients: state.burger.ingredients,\n    }));\n    const dispatch = useDispatch();\n\n    const moveCard: TMoveCard = (index, atIndex) => {\n        dispatch({\n            type: MOVE_CARD,\n            index: index,\n            atIndex: atIndex,\n        });\n    };\n    const [, listRef] = useDrop({\n        accept: 'ingredient',\n        drop(item: TIngredient) {\n            dispatch({\n                type: ADD_INGREDIENT,\n                ingredient: item,\n            });\n            dispatch({\n                type: INCREASE_INGREDIENT_COUNT,\n                ingredientId: item._id,\n            });\n        },\n    });\n\n    const cartTotal = useCallback(() => {\n        let total = bun.price * 2;\n        ingredients.forEach((ingredient) => {\n            if (ingredient.type !== 'bun') total += ingredient.price;\n        });\n        dispatch({\n            type: SET_TOTAL,\n            total: total,\n        });\n    }, [ingredients, bun.price, dispatch]);\n\n    const setIngredientsIDs = useCallback(() => {\n        const ingredientsIDs = ingredients.map((ingredient) => ingredient._id).concat(bun._id);\n        dispatch({\n            type: SET_INGREDIENTS_IDS,\n            IDs: ingredientsIDs,\n        });\n    }, [ingredients, bun._id, dispatch]);\n\n    useEffect(() => {\n        cartTotal();\n        setIngredientsIDs();\n    }, [bun, ingredients, cartTotal, setIngredientsIDs]);\n\n    const setIngredientsIndex = useCallback(() => {\n        dispatch({\n            type: SET_INGREDIENT_INDEX,\n        });\n    }, [dispatch]);\n\n    const topBunMarkup = (\n        <article className={listStyles.bothSides}>\n            <ConstructorElement\n                type=\"top\"\n                isLocked={true}\n                text={bun.name + ' (верх)'}\n                price={bun.price}\n                thumbnail={bun.image}\n            />\n        </article>\n    );\n\n    const bottomBunMarkup = (\n        <article className={listStyles.bothSides}>\n            <ConstructorElement\n                type=\"bottom\"\n                isLocked={true}\n                text={bun.name + ' (низ)'}\n                price={bun.price}\n                thumbnail={bun.image}\n            />\n        </article>\n    );\n\n    const renderIngredients = (ingredient: TIngredient, index: number) => {\n        return (\n            <ConstructorIngredient\n                key={index}\n                ingredient={ingredient}\n                index={index}\n                moveCard={moveCard}\n                setIngredientsIndex={setIngredientsIndex}\n            />\n        );\n    };\n\n    const ingredientsMarkup = (\n        <div className={listStyles.constructorList}>\n            {!ingredients.length ? (\n                <h3 className=\"text text_type_main-medium text_color_inactive pl-10 pt-1 pl-7\">\n                    А теперь выберите ингредиенты для бургера\n                </h3>\n            ) : (\n                ingredients.map((ingredient, index) => renderIngredients(ingredient, index))\n            )}\n        </div>\n    );\n\n    const content = !Object.keys(bun).length ? (\n        <h3 className=\"text text_type_main-medium pt-10 text_color_inactive\">\n            Для начала выберите булку для бургера - перетащите ее прямо сюда\n        </h3>\n    ) : (\n        <>\n            {topBunMarkup} {ingredientsMarkup} {bottomBunMarkup}\n        </>\n    );\n\n    return (\n        <div ref={listRef} onDrop={(e) => e.preventDefault()} className={listStyles.commonList}>\n            {content}\n        </div>\n    );\n});\n","import React, { FC } from 'react';\n\nimport popupStyles from './popup.module.css';\nimport { TModalOverlayProps } from './modal-types';\n\nconst ModalOverlay: FC<TModalOverlayProps> = ({ onClose, children }) => {\n    return (\n        <div className={popupStyles.popup__overlay} onClick={onClose}>\n            {children}\n        </div>\n    );\n};\n\nexport default ModalOverlay;\n","import React, { FC, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport ModalOverlay from './modal-overlay';\nimport popupStyles from './popup.module.css';\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { TModalProps } from './modal-types';\n\nconst modalRoot: Element = document.getElementById('react-modals')!;\n\nconst Modal: FC<TModalProps> = ({ title, onClose, children }) => {\n    useEffect(() => {\n        function onEscKeyDown(e: KeyboardEvent): void {\n            if (e.key === 'Escape') onClose(e);\n        }\n        document.addEventListener('keydown', onEscKeyDown);\n        return () => {\n            document.removeEventListener('keydown', onEscKeyDown);\n        };\n    }, [onClose]);\n\n    return createPortal(\n        <ModalOverlay onClose={onClose}>\n            <div\n                className={`${popupStyles.popup__content} pt-10 pb-15 pl-10 pr-10`}\n                onClick={(e) => e.stopPropagation()}\n            >\n                <div className={`mb-4 ${popupStyles.popup__base}`}>\n                    {title && <h3 className={`text text_type_main-large ${popupStyles.popup__title}`}>{title}</h3>}\n                    <div onClick={onClose} className={popupStyles.popup__cross}>\n                        <CloseIcon type=\"primary\" />\n                    </div>\n                </div>\n                {children}\n            </div>\n        </ModalOverlay>,\n        modalRoot,\n    );\n};\n\nexport default Modal;\n","export default __webpack_public_path__ + \"static/media/done.7341dd32.svg\";","import { ChangeEvent, Dispatch, SetStateAction } from 'react';\nimport { format } from 'date-fns';\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow';\nimport isToday from 'date-fns/isToday';\nimport isYesterday from 'date-fns/isYesterday';\nimport { ru } from 'date-fns/locale';\nimport { TIngredient } from '../components/burger-ingredients/ingredient/ingredient-types';\nimport { TFeedOrder } from '../components/feed/feed';\n\ntype TForm = {\n    email?: string;\n    password?: string;\n    name?: string;\n    code?: string;\n};\n\ntype TFormHandler = (e: ChangeEvent<HTMLInputElement>, setForm: Dispatch<SetStateAction<any>>, form: TForm) => void;\n\nexport const formHandler: TFormHandler = (e, setForm, form) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n};\n\nexport const setCookie = (\n    name: string,\n    value: string,\n    props: { path?: string; expires?: Date | string } = {},\n): void => {\n    props = {\n        path: '/', //задаем корневой адрес для cookies\n        ...props,\n    };\n    let exp = props.expires;\n    if (typeof exp == 'number' && exp) {\n        const d = new Date();\n        d.setTime(d.getTime() + exp * 1000);\n        exp = props.expires = d;\n    }\n    if (typeof exp != 'string') {\n        if (exp && exp.toUTCString) {\n            props.expires = exp.toUTCString();\n        }\n    }\n    value = encodeURIComponent(value);\n    let updatedCookie = name + '=' + value;\n    for (const propName in props) {\n        updatedCookie += '; ' + propName;\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        const propValue = props[propName];\n        if (propValue !== true) {\n            updatedCookie += '=' + propValue;\n        }\n    }\n    document.cookie = updatedCookie;\n};\n\nexport function getCookie(name: string): string | undefined {\n    const matches = document.cookie.match(\n        // eslint-disable-next-line\n        new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\n    );\n    return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nexport const dataFunc = (date: string): string => {\n    let result = '';\n    const currentDate = new Date(date);\n    isToday(currentDate)\n        ? (result += 'Сегодня, ')\n        : isYesterday(currentDate)\n        ? (result += 'Вчера, ')\n        : (result += `${formatDistanceToNow(currentDate, { locale: ru })} назад, `);\n    return (result += `\n    ${format(new Date(currentDate), 'H:mm', { locale: ru })}\n    i-${format(new Date(currentDate), 'z', { locale: ru })} \n  `);\n};\n\nexport const orderSumFunc = (IDs: Array<string>, ingredients: Array<TIngredient>): number => {\n    let result = 0;\n    IDs.forEach((id: string) => {\n        const currentIgd = ingredients.find((ingredient: TIngredient) => ingredient._id === id);\n        if (currentIgd && currentIgd.type === 'bun') result += currentIgd.price * 2;\n        if (currentIgd && currentIgd.type !== 'bun') result += currentIgd.price;\n    });\n    return result;\n};\n\nexport const orderIngredients = (order: TFeedOrder, ingredients: Array<TIngredient>): Array<TIngredient> | null => {\n    if (order) {\n        const result = order.ingredients.reduce((arr: Array<TIngredient>, ingredientID) => {\n            for (const item of arr) {\n                if (item._id === ingredientID) {\n                    item.ingredientOrderCount += 1;\n                    return arr;\n                }\n            }\n            const currentIngredient = ingredients.find((ingredient: TIngredient) => ingredient._id === ingredientID);\n            if (currentIngredient) {\n                if (currentIngredient.type === 'bun') {\n                    currentIngredient.ingredientOrderCount += 2;\n                } else currentIngredient.ingredientOrderCount += 1;\n                arr.push(currentIngredient);\n            }\n\n            return arr;\n        }, []);\n\n        console.log(result);\n\n        return result;\n    }\n\n    return null;\n};\n","import {\n    REQUEST_URL,\n    GET_ORDER_NUMBER,\n    GET_ORDER_NUMBER_SUCCESS,\n    GET_ORDER_NUMBER_FAILED,\n    RESET_ORDER_NUMBER,\n} from '../constants';\nimport { AppThunk, AppDispatch } from '../thunk-types';\nimport { getCookie } from '../../utils';\n\nconst setOrderNumber = (number: number) => {\n    return {\n        type: GET_ORDER_NUMBER_SUCCESS,\n        number,\n    };\n};\n\nexport interface IGetOrderNumber {\n    readonly type: typeof GET_ORDER_NUMBER;\n}\n\nexport interface IGetOrderNumberSuccess {\n    readonly type: typeof GET_ORDER_NUMBER_SUCCESS;\n    readonly number: number;\n}\n\nexport interface IGetOrderNumberFailed {\n    readonly type: typeof GET_ORDER_NUMBER_FAILED;\n}\n\nexport interface IResetOrderNumber {\n    readonly type: typeof RESET_ORDER_NUMBER;\n}\n\nexport type TOrderDetailsActions = IGetOrderNumber | IGetOrderNumberSuccess | IGetOrderNumberFailed | IResetOrderNumber;\n\nexport const getOrderNumber: AppThunk = (orderIDs: Array<string>) => (dispatch: AppDispatch) => {\n    dispatch({\n        type: GET_ORDER_NUMBER,\n    });\n    const token = getCookie('accessToken');\n\n    fetch(REQUEST_URL + '/orders', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n            ingredients: orderIDs,\n        }),\n    })\n        .then((res) => {\n            if (res && res.ok) {\n                res.json().then((res) => {\n                    dispatch(setOrderNumber(res.order.number));\n                    // return res.order.number;\n                });\n            } else {\n                dispatch({\n                    type: GET_ORDER_NUMBER_FAILED,\n                });\n            }\n        })\n        .catch(() => {\n            dispatch({\n                type: GET_ORDER_NUMBER_FAILED,\n            });\n        });\n};\n","import React, { ReactElement, useEffect } from 'react';\n\nimport orderStyles from './order-details.module.css';\nimport doneButton from '../../images/done.svg';\nimport { useDispatch, useSelector } from '../../services/hooks';\nimport { getOrderNumber } from '../../services/actions/order-details';\nimport { CommonStateType } from '../../services/reducers/reducers-types';\n\nconst OrderDetails = (): ReactElement => {\n    const { ingredientIDs, orderNumber, orderNumberRequest, orderNumberFailed } = useSelector(\n        (state: CommonStateType) => ({\n            ingredientIDs: state.burger.ingredientIDs,\n            orderNumber: state.order.number,\n            orderNumberRequest: state.order.orderNumberRequest,\n            orderNumberFailed: state.order.orderNumberFailed,\n        }),\n    );\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(getOrderNumber(ingredientIDs));\n    }, [dispatch, ingredientIDs]);\n\n    return orderNumberRequest ? (\n        <h4 className={`text text_type_main-medium mb-15 ${orderStyles.order__text_type_centered}`}>\n            Ожидайте заказ формируется\n        </h4>\n    ) : orderNumberFailed ? (\n        <h4 className={`text text_type_main-medium mb-15 ${orderStyles.order__text_type_centered}`}>\n            Что-то пошло не так, попробуйте заново\n        </h4>\n    ) : (\n        <>\n            <p className={`text text_type_digits-large ml-15 mr-15 mb-8 ${orderStyles.order__number}`}>{orderNumber}</p>\n            <h4 className={`text text_type_main-medium mb-15 ${orderStyles.order__text_type_centered}`}>\n                идентификатор заказа\n            </h4>\n            <img className={orderStyles.order__done} src={doneButton} alt=\"подтвердить заказ\" />\n            <p className={`text text_type_main-default mt-15 mb-2 ${orderStyles.order__text_type_centered}`}>\n                Ваш заказ начали готовить\n            </p>\n            <p className={`text text_type_main-default ${orderStyles.order__text_type_centered}`}>\n                Дождитесь готовности на орбитальной станции\n            </p>\n        </>\n    );\n};\n\nexport default OrderDetails;\n","import React, { useState, FC } from 'react';\n\nimport { useDispatch, useSelector } from '../../../services/hooks';\n\nimport totalStyles from './constructor-cart.module.css';\nimport { CurrencyIcon, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport Modal from '../../modal/modal';\nimport OrderDetails from '../../order-details/order-details';\nimport { RESET_ORDER_NUMBER } from '../../../services/constants';\nimport { useHistory } from 'react-router-dom';\nimport { CommonStateType } from '../../../services/reducers/reducers-types';\nimport { THistoryState } from './constructor-cart-types';\n\nconst ConstructorCart: FC = () => {\n    const [visibleModal, setVisibleModal] = useState(false);\n    const { total, user } = useSelector((state: CommonStateType) => ({\n        total: state.burger.total,\n        user: state.auth.user,\n    }));\n    const dispatch = useDispatch();\n    const history = useHistory<THistoryState>();\n\n    const openModal = (): void => {\n        setVisibleModal(true);\n    };\n\n    const closeModal = (): void => {\n        setVisibleModal(false);\n        dispatch({\n            type: RESET_ORDER_NUMBER,\n        });\n    };\n\n    const modal = (\n        <Modal onClose={closeModal}>\n            <OrderDetails />\n        </Modal>\n    );\n\n    const orderHandler = (): void => {\n        user\n            ? openModal()\n            : history.replace({\n                  pathname: '/login',\n              });\n    };\n\n    return total ? (\n        <div className={`${totalStyles.constructor__total} mt-10 mb-9`}>\n            <p className={`${totalStyles.constructor__price} text text_type_digits-medium`}>{total}</p>\n            <CurrencyIcon type=\"primary\" />\n            <Button onClick={orderHandler} type=\"primary\" size=\"large\">\n                Оформить заказ\n            </Button>\n            {visibleModal && modal}\n        </div>\n    ) : null;\n};\n\nexport default ConstructorCart;\n","import React, { ReactElement } from 'react';\n\nimport constructorStyles from './burger-constructor.module.css';\n\nimport { ConstructorList } from './constructor-list/constructor-list';\nimport ConstructorCart from './constructor-cart/constructor-cart';\n\nconst BurgerConstructor = (): ReactElement => {\n    return (\n        <section className={`${constructorStyles.constructor} mr-5 pt-25 pr-4 pl-4`}>\n            <ConstructorList />\n            <ConstructorCart />\n        </section>\n    );\n};\n\nexport default BurgerConstructor;\n","import React, { ReactElement } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\n\nimport homeStyles from './home.module.css';\nimport BurgerIngredients from '../components/burger-ingredients/burger-ingredients';\nimport BurgerConstructor from '../components/burger-constructor/burger-constructor';\n\nexport const HomePage = (): ReactElement => {\n    return (\n        <main className={homeStyles.main}>\n            <DndProvider backend={HTML5Backend}>\n                <BurgerIngredients />\n                <BurgerConstructor />\n            </DndProvider>\n        </main>\n    );\n};\n","import React, { FC } from 'react';\n\nimport formStyles from './auth-form.module.css';\n\nconst AuthForm: FC = ({ children }) => {\n    return <div className={formStyles.auth}>{children}</div>;\n};\n\nexport default AuthForm;\n","import { REQUEST_URL } from './constants';\nimport { setCookie } from '../utils';\n\ntype optionsFetchWithRequest = {\n    method: string;\n    headers: {\n        Authorization?: string;\n        'Content-Type': string;\n    };\n    body?: string;\n};\n\nexport const checkResponse = (res: Response): Promise<any> => {\n    return res.ok ? res.json() : res.json().then((err: string) => Promise.reject(err));\n};\n\nexport const refreshToken = (): Promise<any> => {\n    return fetch(`${REQUEST_URL}/auth/token`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json;charset=utf-8',\n        },\n        body: JSON.stringify({\n            token: localStorage.getItem('refreshToken'),\n        }),\n    }).then(checkResponse);\n};\n\nexport const fetchWithRefresh = async (url: string, options: optionsFetchWithRequest): Promise<any> => {\n    try {\n        const res = await fetch(url, options);\n        return await checkResponse(res);\n    } catch (err: any) {\n        if (err.message === 'jwt expired') {\n            const refreshData = await refreshToken(); //обновляем токен\n            localStorage.setItem('refreshToken', refreshData.refreshToken);\n            setCookie('accessToken', refreshData.accessToken);\n            options.headers.Authorization = refreshData.accessToken;\n            const res = await fetch(url, options); //повторяем запрос\n            return await checkResponse(res);\n        } else {\n            return Promise.reject(err);\n        }\n    }\n};\n","import { AUTHORIZE_USER, LOGOUT, REQUEST_URL, SET_USER } from '../constants';\nimport { setCookie, getCookie } from '../../utils';\nimport { fetchWithRefresh, checkResponse } from '../api';\nimport { AppThunk, AppDispatch } from '../thunk-types';\nimport {\n    GET_USER_SUCCESS,\n    GET_USER_FAILED,\n    REGISTER_USER,\n    REGISTER_USER_SUCCESS,\n    REGISTER_USER_FAILED,\n    AUTHORIZE_USER_SUCCESS,\n    AUTHORIZE_USER_FAILED,\n    REFRESH_TOKEN,\n    REFRESH_TOKEN_SUCCESS,\n    REFRESH_TOKEN_FAILED,\n    LOGOUT_SUCCESS,\n    LOGOUT_FAILED,\n    SET_PASSWORD_RESET,\n} from '../constants';\n\ntype TUserData = { email: string; name: string };\n\nexport const actionCreators = {\n    getUser: (user: TUserData) => ({ type: GET_USER_SUCCESS, user }),\n    getUserFailed: () => ({ type: GET_USER_FAILED }),\n    refreshToken: () => ({ type: REFRESH_TOKEN }),\n    refreshTokenFailed: () => ({ type: REFRESH_TOKEN_FAILED }),\n    setPasswordReset: () => ({ type: SET_PASSWORD_RESET, passwordIsReset: true }),\n    setNewUser: (user: TUserData) => ({ type: REGISTER_USER_SUCCESS, user }),\n    setNewUserFailed: () => ({ type: REGISTER_USER_FAILED }),\n    authorizeUser: (user: TUserData) => ({ type: AUTHORIZE_USER_SUCCESS, user }),\n    authorizeUserFailed: () => ({ type: AUTHORIZE_USER_FAILED }),\n    setUserLogout: () => ({ type: LOGOUT_SUCCESS, user: null }),\n    logoutFailed: () => ({ type: LOGOUT_FAILED }),\n};\n\nexport interface IGetUserSuccess {\n    readonly type: typeof GET_USER_SUCCESS;\n    readonly user: {\n        readonly name: string;\n        readonly email: string;\n    };\n}\n\nexport interface IGetUserFailed {\n    readonly type: typeof GET_USER_FAILED;\n}\n\nexport interface ISetUser {\n    readonly type: typeof SET_USER;\n    readonly user: {\n        readonly name: string;\n        readonly email: string;\n    };\n}\n\nexport interface IRegisterUser {\n    readonly type: typeof REGISTER_USER;\n}\n\nexport interface IRegisterUserSuccess {\n    readonly type: typeof REGISTER_USER_SUCCESS;\n    readonly user: {\n        readonly name: string;\n        readonly email: string;\n    };\n}\n\nexport interface IRegisterUserFailed {\n    readonly type: typeof REGISTER_USER_FAILED;\n}\n\nexport interface IAuthorizeUser {\n    readonly type: typeof AUTHORIZE_USER;\n}\n\nexport interface IAuthorizeUserSuccess {\n    readonly type: typeof AUTHORIZE_USER_SUCCESS;\n    readonly user: {\n        readonly name: string;\n        readonly email: string;\n    };\n}\n\nexport interface IAuthorizeUserFailed {\n    readonly type: typeof AUTHORIZE_USER_FAILED;\n}\n\nexport interface IRefreshToken {\n    readonly type: typeof REFRESH_TOKEN;\n}\n\nexport interface IRefreshTokenSuccess {\n    readonly type: typeof REFRESH_TOKEN_SUCCESS;\n}\n\nexport interface IRefreshTokenFailed {\n    readonly type: typeof REFRESH_TOKEN_FAILED;\n}\n\nexport interface ILogout {\n    readonly type: typeof LOGOUT;\n}\n\nexport interface ILogoutSuccess {\n    readonly type: typeof LOGOUT_SUCCESS;\n    readonly user: {\n        readonly name: string;\n        readonly email: string;\n    };\n}\n\nexport interface ILogoutFailed {\n    readonly type: typeof LOGOUT_FAILED;\n}\n\nexport interface ISetPasswordReset {\n    readonly type: typeof SET_PASSWORD_RESET;\n    passwordIsReset: boolean;\n}\n\nexport type TAuthUserActions =\n    | IGetUserSuccess\n    | IGetUserFailed\n    | ISetUser\n    | IRegisterUser\n    | IRegisterUserSuccess\n    | IRegisterUserFailed\n    | IAuthorizeUser\n    | IAuthorizeUserSuccess\n    | IAuthorizeUserFailed\n    | IRefreshToken\n    | IRefreshTokenSuccess\n    | IRefreshTokenFailed\n    | ILogout\n    | ILogoutSuccess\n    | ILogoutFailed\n    | ISetPasswordReset;\n\nexport const getUserInfo: AppThunk = (token: string) => (dispatch: AppDispatch) => {\n    fetchWithRefresh(`${REQUEST_URL}/auth/user`, {\n        method: 'GET',\n        headers: {\n            Authorization: 'Bearer ' + token,\n            'Content-Type': 'application/json',\n        },\n    })\n        .then((data) => {\n            if (data.success) {\n                dispatch(actionCreators.getUser(data.user));\n            } else {\n                throw Error('Error user request');\n            }\n        })\n        .catch(() => {\n            dispatch(actionCreators.getUserFailed());\n        });\n};\n\nexport const updateUserInfo: AppThunk = (form, token) => (dispatch: AppDispatch) => {\n    fetchWithRefresh(`${REQUEST_URL}/auth/user`, {\n        method: 'PATCH',\n        headers: {\n            Authorization: 'Bearer ' + token,\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(form),\n    })\n        .then((data) => {\n            if (data.success) {\n                dispatch(actionCreators.getUser(data.user));\n            } else {\n                throw Error('Error user request');\n            }\n        })\n        .catch(() => {\n            dispatch(actionCreators.getUserFailed());\n        });\n};\n\nexport const forgotPassword: AppThunk = (email) => (dispatch: AppDispatch) => {\n    return fetchWithRefresh(`${REQUEST_URL}/password-reset`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json;charset=utf-8',\n        },\n        body: JSON.stringify({\n            email: email,\n        }),\n    })\n        .then((res) => {\n            if (res.success && res.message === 'Reset email sent') {\n                dispatch(actionCreators.setPasswordReset());\n            }\n        })\n        .catch((e) => console.log(e));\n};\n\nexport const resetPassword: AppThunk = (password, code) => () => {\n    fetchWithRefresh(`${REQUEST_URL}/password-reset/reset`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json;charset=utf-8',\n        },\n        body: JSON.stringify({\n            password: password,\n            token: code,\n        }),\n    })\n        .then(checkResponse)\n        .catch((err) => console.log(err));\n};\n\nexport const registerRequest: AppThunk = (form) => (dispatch: AppDispatch) => {\n    dispatch({\n        type: REGISTER_USER,\n    });\n\n    fetch(`${REQUEST_URL}/auth/register`, {\n        method: 'POST',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify(form),\n    })\n        .then((res) => {\n            if (res && res.ok) {\n                res.json().then((data) => {\n                    const token = data.accessToken.split(' ')[1];\n                    if (data.refreshToken && token) {\n                        setCookie('accessToken', token);\n                        localStorage.setItem('refreshToken', data.refreshToken);\n                    }\n                    dispatch(actionCreators.setNewUser(data.user));\n                });\n            } else {\n                dispatch(actionCreators.setNewUserFailed());\n            }\n        })\n        .catch(() => {\n            dispatch(actionCreators.setNewUserFailed());\n        });\n};\n\nexport const loginRequest: AppThunk = (form) => (dispatch: AppDispatch) => {\n    dispatch(actionCreators.refreshToken());\n\n    fetch(`${REQUEST_URL}/auth/login`, {\n        method: 'POST',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify(form),\n    })\n        .then((res) => {\n            if (res && res.ok) {\n                res.json().then((data) => {\n                    const token = data.accessToken.split(' ')[1];\n                    if (token && data.refreshToken) {\n                        setCookie('accessToken', token);\n                        localStorage.setItem('refreshToken', data.refreshToken);\n                    }\n                    dispatch(actionCreators.authorizeUser(data.user));\n                });\n            } else {\n                dispatch(actionCreators.authorizeUserFailed());\n            }\n        })\n        .catch(() => {\n            dispatch(actionCreators.authorizeUserFailed());\n        });\n};\n\nexport const refreshToken: AppThunk = () => (dispatch: AppDispatch) => {\n    dispatch(actionCreators.refreshToken());\n\n    const refreshToken = getCookie('refreshToken');\n\n    fetch(`${REQUEST_URL}/auth/token`, {\n        method: 'POST',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify({\n            token: refreshToken,\n        }),\n    })\n        .then((res) => {\n            if (res && res.ok) {\n                res.json().then((data) => {\n                    const token = data.accessToken.split(' ')[1];\n                    if (token && data.refreshToken) {\n                        setCookie('accessToken', token);\n                        localStorage.setItem('refreshToken', data.refreshToken);\n                    }\n                    dispatch({\n                        type: REFRESH_TOKEN_SUCCESS,\n                    });\n                });\n            } else {\n                dispatch(actionCreators.refreshTokenFailed());\n            }\n        })\n        .catch(() => {\n            dispatch(actionCreators.refreshTokenFailed());\n        });\n};\n\nexport const logoutRequest: AppThunk = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: REGISTER_USER,\n    });\n\n    const refreshToken = localStorage.getItem('refreshToken');\n\n    fetch(`${REQUEST_URL}/auth/logout`, {\n        method: 'POST',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify({\n            token: refreshToken,\n        }),\n    })\n        .then((res) => {\n            if (res && res.ok) {\n                res.json().then((data) => {\n                    if (data.success) {\n                        setCookie('accessToken', '');\n                        localStorage.removeItem('refreshToken');\n                        dispatch(actionCreators.setUserLogout());\n                    } else {\n                        dispatch(actionCreators.logoutFailed());\n                    }\n                });\n            }\n        })\n        .catch(() => {\n            dispatch(actionCreators.logoutFailed());\n        });\n};\n","import React, { ReactElement, useCallback, useRef, useState } from 'react';\n\nimport loginStyles from './login.module.css';\nimport AuthForm from '../components/auth-form/auth-form';\nimport { formHandler as onChange } from '../utils';\nimport formStyles from '../components/auth-form/auth-form.module.css';\nimport { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link } from 'react-router-dom';\nimport { loginRequest } from '../services/actions/auth';\nimport { useDispatch } from 'react-redux';\nimport { TICons } from '@ya.praktikum/react-developer-burger-ui-components/dist/ui/icons';\n\nexport type TForm = {\n    email: string;\n    password: string;\n};\n\nexport const LoginPage = (): ReactElement => {\n    const [passwordInputIcon, setIcon] = useState<keyof TICons>('ShowIcon');\n    const [form, setForm] = useState<TForm>({\n        email: '',\n        password: '',\n    });\n    const passwordRef = useRef<HTMLInputElement>(null);\n\n    const dispatch = useDispatch();\n\n    const onIconClick = useCallback(() => {\n        if (passwordRef.current) {\n            if (passwordRef.current.type === 'password') {\n                passwordRef.current.type = 'text';\n                setIcon('HideIcon');\n            } else {\n                passwordRef.current.type = 'password';\n                setIcon('ShowIcon');\n            }\n        }\n    }, [passwordRef]);\n\n    const login = useCallback(\n        (e) => {\n            e.preventDefault();\n            dispatch(loginRequest(form));\n        },\n        [dispatch, form],\n    );\n\n    return (\n        <div className={loginStyles.main}>\n            <AuthForm>\n                <form className={formStyles.form} onSubmit={login}>\n                    <h2 className={`text text_type_main-medium mb-6 ${formStyles.title}`}>Вход</h2>\n                    <Input\n                        type={'email'}\n                        placeholder={'E-mail'}\n                        value={form.email}\n                        onChange={(e) => onChange(e, setForm, form)}\n                        name={'email'}\n                        size={'default'}\n                    />\n                    <Input\n                        type={'password'}\n                        placeholder={'Пароль'}\n                        value={form.password}\n                        onChange={(e) => onChange(e, setForm, form)}\n                        name={'password'}\n                        icon={passwordInputIcon}\n                        ref={passwordRef}\n                        onIconClick={onIconClick}\n                        size={'default'}\n                    />\n                    <Button type=\"primary\" size=\"medium\">\n                        Войти\n                    </Button>\n                </form>\n                <p className={`${formStyles.auth__text} text text_type_main-default mt-4`}>\n                    Вы новый пользователь?\n                    <Link to=\"/register\" className={formStyles.auth__link}>\n                        Зарегистрироваться\n                    </Link>\n                </p>\n                <p className={`${formStyles.auth__text} text text_type_main-default mt-4`}>\n                    Забыли пароль?\n                    <Link to=\"/forgot-password\" className={formStyles.auth__link}>\n                        Восстановить пароль\n                    </Link>\n                </p>\n            </AuthForm>\n        </div>\n    );\n};\n","import React, { ReactElement } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport notFoundStyles from './notFound.module.css';\n\nexport const NotFoundPage = (): ReactElement => {\n    return (\n        <div className={`${notFoundStyles.notFound} text text_type_main-medium`}>\n            <h2 className=\"text text_type_digits-large text_color_inactive\">404</h2>\n            Тут пусто. <br />\n            Вернитесь назад или перейдите на <Link to=\"/react-burger/\">Главную</Link>.\n        </div>\n    );\n};\n","import React, { useState, useCallback, ReactElement } from 'react';\n\nimport registerStyles from './register.module.css';\nimport AuthForm from '../components/auth-form/auth-form';\nimport { formHandler as onChange } from '../utils';\nimport formStyles from '../components/auth-form/auth-form.module.css';\nimport { registerRequest } from '../services/actions/auth';\n\nimport { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, Redirect } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CommonStateType } from '../services/reducers/reducers-types';\n\nexport type TForm = {\n    email: string;\n    name: string;\n    password: string;\n};\n\nexport const RegisterPage = (): ReactElement => {\n    const user = useSelector((state: CommonStateType) => state.auth.user);\n    const [form, setForm] = useState<TForm>({\n        email: '',\n        password: '',\n        name: '',\n    });\n    const dispatch = useDispatch();\n\n    const register = useCallback(\n        (e) => {\n            e.preventDefault();\n            dispatch(registerRequest(form));\n        },\n        [dispatch, form],\n    );\n\n    return (\n        <div className={registerStyles.main}>\n            {!user ? (\n                <AuthForm>\n                    <form className={formStyles.form} onSubmit={register}>\n                        <h2 className={`text text_type_main-medium mb-6 ${formStyles.title}`}>Регистрация</h2>\n                        <Input\n                            type={'text'}\n                            placeholder={'Имя'}\n                            value={form.name}\n                            onChange={(e) => onChange(e, setForm, form)}\n                            name={'name'}\n                            size={'default'}\n                        />\n                        <Input\n                            type={'email'}\n                            placeholder={'E-mail'}\n                            value={form.email}\n                            onChange={(e) => onChange(e, setForm, form)}\n                            name={'email'}\n                            size={'default'}\n                        />\n                        <Input\n                            type={'password'}\n                            placeholder={'Пароль'}\n                            value={form.password}\n                            onChange={(e) => onChange(e, setForm, form)}\n                            name={'password'}\n                            icon={'ShowIcon'}\n                            size={'default'}\n                        />\n                        <Button type=\"primary\" size=\"medium\">\n                            Зарегистрироваться\n                        </Button>\n                    </form>\n                    <p className={`${formStyles.auth__text} text text_type_main-default mt-4`}>\n                        Уже зарегистрированы?{' '}\n                        <Link to=\"/login\" className={formStyles.auth__link}>\n                            Войти\n                        </Link>\n                    </p>\n                </AuthForm>\n            ) : (\n                <Redirect to=\"/\" />\n            )}\n        </div>\n    );\n};\n","import React, { ReactElement, useCallback, useState } from 'react';\n\nimport registerStyles from './register.module.css';\nimport AuthForm from '../components/auth-form/auth-form';\nimport formStyles from '../components/auth-form/auth-form.module.css';\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, Redirect } from 'react-router-dom';\n\nimport { forgotPassword } from '../services/actions/auth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CommonStateType } from '../services/reducers/reducers-types';\nconst emailPattern = /^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$/;\n\nexport const ForgotPasswordPage = (): ReactElement => {\n    const [email, setEmail] = useState('');\n    const [error, setError] = useState(false);\n    const isPasswordReset = useSelector((state: CommonStateType) => state.auth.passwordReset);\n    const dispatch = useDispatch();\n\n    const onSubmit = useCallback(\n        (e) => {\n            e.preventDefault();\n            if (email.match(emailPattern)) {\n                try {\n                    dispatch(forgotPassword(email));\n                } catch (e) {\n                    console.log(e);\n                }\n            } else {\n                setError(true);\n            }\n        },\n        [dispatch, email],\n    );\n\n    return !isPasswordReset ? (\n        <div className={registerStyles.main}>\n            <AuthForm>\n                <form className={formStyles.form} onSubmit={onSubmit}>\n                    <h2 className={`text text_type_main-medium mb-6 ${formStyles.title}`}>Восстановление пароля</h2>\n                    <Input\n                        type={'email'}\n                        placeholder={'Укажите e-mail'}\n                        onChange={(e) => {\n                            setEmail(e.target.value);\n                            if (error) setError(false);\n                        }}\n                        value={email}\n                        name={'email'}\n                        error={error}\n                        errorText={'Неверный формат email'}\n                        size={'default'}\n                    />\n                    <Button type=\"primary\" size=\"medium\">\n                        Восстановить\n                    </Button>\n                </form>\n                <p className={`${formStyles.auth__text} text text_type_main-default mt-4`}>\n                    Вспомнили пароль?{' '}\n                    <Link to=\"/login\" className={formStyles.auth__link}>\n                        Войти\n                    </Link>\n                </p>\n            </AuthForm>\n        </div>\n    ) : (\n        <Redirect to={'/reset-password'} />\n    );\n};\n","import React, { ReactElement, SyntheticEvent, useState } from 'react';\nimport registerStyles from './register.module.css';\nimport AuthForm from '../components/auth-form/auth-form';\nimport formStyles from '../components/auth-form/auth-form.module.css';\nimport { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, Redirect, useHistory } from 'react-router-dom';\nimport { resetPassword } from '../services/actions/auth';\nimport { SET_PASSWORD_RESET } from '../services/constants';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CommonStateType } from '../services/reducers/reducers-types';\n\nexport const ResetPasswordPage = (): ReactElement => {\n    const [password, setPassword] = useState<string>('');\n    const [code, setCode] = useState<string>('');\n    const [passError, setPassError] = useState<boolean>(false);\n    const [codeError, setCodeError] = useState<boolean>(false);\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const isPasswordReset = useSelector((state: CommonStateType) => state.auth.passwordReset);\n\n    const onSubmit = (e: SyntheticEvent) => {\n        e.preventDefault();\n        if (password && code) {\n            try {\n                dispatch(resetPassword(password, code));\n                dispatch({\n                    type: SET_PASSWORD_RESET,\n                    passwordIsReset: false,\n                });\n                history.replace({\n                    pathname: '/login',\n                });\n            } catch (e) {\n                console.log(e);\n            }\n        } else {\n            passError && codeError ? setPassError(true) : passError ? setPassError(true) : setCodeError(true);\n        }\n    };\n\n    return isPasswordReset ? (\n        <div className={registerStyles.main}>\n            <AuthForm>\n                <form className={formStyles.form} onSubmit={onSubmit}>\n                    <h2 className={`text text_type_main-medium mb-6 ${formStyles.title}`}>Восстановление пароля</h2>\n                    <Input\n                        type=\"password\"\n                        placeholder=\"Введите новый пароль\"\n                        value={password}\n                        onChange={(e) => {\n                            setPassword(e.target.value);\n                            setPassError(false);\n                        }}\n                        name={'password'}\n                        error={passError}\n                        errorText={'Поле не может быть пустым'}\n                        size={'default'}\n                    />\n                    <Input\n                        type={undefined}\n                        placeholder=\"Введите код из письма\"\n                        value={code}\n                        onChange={(e) => {\n                            setCode(e.target.value);\n                            setCodeError(false);\n                        }}\n                        name={'code'}\n                        error={codeError}\n                        errorText={'Поле не может быть пустым'}\n                        size={'default'}\n                    />\n                    <Button type=\"primary\" size=\"medium\">\n                        Сохранить\n                    </Button>\n                </form>\n                <p className={`${formStyles.auth__text} text text_type_main-default mt-4`}>\n                    Вспомнили пароль?{' '}\n                    <Link to=\"/login\" className={formStyles.auth__link}>\n                        Войти\n                    </Link>\n                </p>\n            </AuthForm>\n        </div>\n    ) : (\n        <Redirect to=\"/forgot-password\" />\n    );\n};\n","import React, { ReactElement, RefObject, useCallback, useEffect, useRef, useState } from 'react';\nimport styles from './profile-edit.module.css';\nimport { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { formHandler as onChange, getCookie } from '../../../utils';\nimport { updateUserInfo } from '../../../services/actions/auth';\nimport { SET_USER } from '../../../services/constants';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CommonStateType } from '../../../services/reducers/reducers-types';\n\nconst onFocusInput = (inputRef: RefObject<HTMLInputElement>) =>\n    inputRef.current ? inputRef.current.classList.add(`${styles.input_isActive}`) : null;\nconst onBlurInput = (inputRef: RefObject<HTMLInputElement>) =>\n    inputRef.current ? inputRef.current.classList.remove(`${styles.input_isActive}`) : null;\nconst onIconClick = (inputRef: RefObject<HTMLInputElement>) => (inputRef.current ? inputRef.current.focus() : null);\n\ntype TForm = {\n    name: string;\n    login: string;\n    password: string;\n};\n\nconst ProfileEdit = (): ReactElement => {\n    const [form, setForm] = useState<TForm>({\n        name: '',\n        login: '',\n        password: '',\n    });\n    const user = useSelector((state: CommonStateType) => state.auth.user);\n    const nameRef = useRef<HTMLInputElement>(null);\n    const loginRef = useRef<HTMLInputElement>(null);\n    const passwordRef = useRef<HTMLInputElement>(null);\n    const dispatch = useDispatch();\n\n    const resetChanges = useCallback(\n        (e) => {\n            e.preventDefault();\n            if (user) {\n                setForm({\n                    ...form,\n                    name: user.name,\n                    login: user.email,\n                    password: '',\n                });\n            }\n        },\n        [user, form],\n    );\n\n    const updateInfo = useCallback(\n        (e) => {\n            e.preventDefault();\n            const token = getCookie('accessToken');\n            try {\n                dispatch(updateUserInfo(form, token));\n                dispatch({\n                    type: SET_USER,\n                    user: {\n                        name: form.name,\n                        login: form.login,\n                    },\n                });\n            } catch (err) {\n                console.log(err);\n            }\n        },\n        [dispatch, form],\n    );\n\n    useEffect(() => {\n        if (user) {\n            setForm({\n                ...form,\n                name: user.name,\n                login: user.email,\n            });\n        }\n    }, []);\n\n    return (\n        <form className={styles.inputs} onSubmit={updateInfo}>\n            <Input\n                type={'text'}\n                placeholder={'Имя'}\n                value={form.name}\n                icon={'EditIcon'}\n                onChange={(e) => onChange(e, setForm, form)}\n                ref={nameRef}\n                name={'name'}\n                onFocus={() => onFocusInput(nameRef)}\n                onBlur={() => onBlurInput(nameRef)}\n                onIconClick={() => onIconClick(nameRef)}\n                size={'default'}\n            />\n            <Input\n                type={'text'}\n                placeholder={'Логин'}\n                value={form.login}\n                icon={'EditIcon'}\n                onChange={(e) => onChange(e, setForm, form)}\n                name={'login'}\n                ref={loginRef}\n                onFocus={() => onFocusInput(loginRef)}\n                onBlur={() => onBlurInput(loginRef)}\n                onIconClick={() => onIconClick(loginRef)}\n                size={'default'}\n            />\n            <Input\n                type={'password'}\n                placeholder={'Пароль'}\n                value={form.password}\n                icon={'EditIcon'}\n                onChange={(e) => onChange(e, setForm, form)}\n                name={'password'}\n                ref={passwordRef}\n                onFocus={() => onFocusInput(passwordRef)}\n                onBlur={() => onBlurInput(passwordRef)}\n                onIconClick={() => onIconClick(passwordRef)}\n                size={'default'}\n            />\n            <div className={styles.info_change}>\n                <span className={`text text_type_main-default ${styles.info_cancel}`} onClick={resetChanges}>\n                    Отмена\n                </span>\n                <Button type=\"primary\" size=\"medium\">\n                    Сохранить\n                </Button>\n            </div>\n        </form>\n    );\n};\n\nexport default ProfileEdit;\n","import { TFeedOrder } from '../../components/feed/feed';\n\nexport const WS_CONNECTION_START = 'WS_CONNECTION_START' as const;\nexport const WS_CONNECTION_SUCCESS = 'WS_CONNECTION_SUCCESS' as const;\nexport const WS_CONNECTION_ERROR = 'WS_CONNECTION_ERROR' as const;\nexport const WS_CONNECTION_CLOSED = 'WS_CONNECTION_CLOSED' as const;\nexport const WS_GET_MESSAGE = 'WS_GET_MESSAGE' as const;\nexport const WS_SEND_MESSAGE = 'WS_SEND_MESSAGE' as const;\nexport const GET_FEED = 'GET_FEED' as const;\nexport const GET_OWNER_FEED = 'GET_OWNER_FEED' as const;\n\nexport interface IWsConnectionStart {\n    readonly type: typeof WS_CONNECTION_START;\n    readonly payload: {\n        url: string;\n    };\n}\n\nexport interface IWsConnectionSuccess {\n    readonly type: typeof WS_CONNECTION_SUCCESS;\n    readonly payload: Event;\n}\n\nexport interface IWsConnectionError {\n    readonly type: typeof WS_CONNECTION_ERROR;\n    readonly payload: Event;\n}\n\nexport interface IWsConnectionClosed {\n    readonly type: typeof WS_CONNECTION_CLOSED;\n    readonly payload: CloseEvent;\n}\n\nexport interface IWsGetMessage {\n    readonly type: typeof WS_GET_MESSAGE;\n    readonly payload: {\n        orders: Array<TFeedOrder>;\n        total: number;\n        totalToday: number;\n    };\n}\n\nexport interface IWsSendMessage {\n    readonly type: typeof WS_SEND_MESSAGE;\n    readonly payload: string;\n}\n\nexport interface IGetFeed {\n    readonly type: typeof GET_FEED;\n    readonly payload: {\n        orders: Array<TFeedOrder>;\n        total: number;\n        totalToday: number;\n    };\n}\n\nexport interface IGetOwnerFeed {\n    readonly type: typeof GET_OWNER_FEED;\n    readonly payload: {\n        orders: Array<TFeedOrder>;\n        total: number;\n        totalToday: number;\n    };\n}\n\nexport type TWsActions =\n    | IWsConnectionStart\n    | IWsConnectionSuccess\n    | IWsConnectionError\n    | IWsConnectionClosed\n    | IWsGetMessage\n    | IWsSendMessage\n    | IGetFeed\n    | IGetOwnerFeed;\n","import React, { FC } from 'react';\nimport styles from './circle-ingredient.module.css';\n\nexport type TCircleIngredientProps = {\n    name: string;\n    url: string;\n    index: number;\n    totalIngrds?: number;\n};\n\nconst indexCreator = (index: number): { zIndex: number } => {\n    return {\n        zIndex: index,\n    };\n};\n\nconst CircleIngredient: FC<TCircleIngredientProps> = ({ name, url, index, totalIngrds }) => {\n    return (\n        <div className={styles.main} style={indexCreator(index)}>\n            {totalIngrds && (\n                <p className={`text text_type_digits-default ${styles.total_ingredients}`}>+{totalIngrds}</p>\n            )}\n            <img className={totalIngrds ? styles.image_background : styles.image} src={url} alt={name} />\n        </div>\n    );\n};\n\nexport default CircleIngredient;\n","import React, { FC, useCallback } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport styles from './feed-order.module.css';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport CircleIngredient from '../../circle-ingredient/circle-ingredient';\nimport { dataFunc, orderSumFunc } from '../../../utils';\nimport { TIngredient } from '../../burger-ingredients/ingredient/ingredient-types';\nimport { TCircleIngredientProps } from '../../circle-ingredient/circle-ingredient';\nimport { useSelector } from '../../../services/hooks';\n\ntype TFeedOrderProps = {\n    readonly id: string;\n    readonly number: number;\n    readonly name: string;\n    readonly date: string;\n    readonly ingredientsIDs: Array<string>;\n};\n\nconst FeedOrder: FC<TFeedOrderProps> = ({ id, number, name, date, ingredientsIDs }) => {\n    const ingredients = useSelector((store) => store.ingredients.ingredients);\n    const location = useLocation();\n\n    const renderIngredientsImages = useCallback(\n        (\n            ingredientsArray: Array<TIngredient>,\n            ingredientID: string,\n            ImageElement: FC<TCircleIngredientProps>,\n            index: number,\n            ingredientsLength: number,\n        ) => {\n            const currentIngredient = ingredientsArray.find((ingredient) => ingredient._id === ingredientID);\n            return currentIngredient && ingredientsLength > 6 && index === 0 ? (\n                <ImageElement\n                    name={currentIngredient.name}\n                    url={currentIngredient.image}\n                    index={index}\n                    totalIngrds={ingredientsLength - 6}\n                    key={index}\n                />\n            ) : (\n                currentIngredient && (\n                    <ImageElement\n                        name={currentIngredient.name}\n                        url={currentIngredient.image}\n                        index={index}\n                        key={index}\n                    />\n                )\n            );\n        },\n        [],\n    );\n\n    const formatedIngredientsIDs = useCallback(() => {\n        const cuttedIDs = [...ingredientsIDs];\n        return cuttedIDs.length > 6 ? cuttedIDs.slice(0, 6) : cuttedIDs;\n    }, [ingredientsIDs]);\n\n    return (\n        <Link\n            to={{\n                pathname: `/feed/${id}`,\n                state: { background: location },\n            }}\n            className={`pt-6 pb-6 pl-6 pr-6 mt-5 mr-4 ${styles.main}`}\n            onClick={() => console.log(location)}\n        >\n            <p className={`text text_type_main-default pb-6 ${styles.order}`}>\n                #{number} <span className={`text_color_inactive ${styles.date}`}>{dataFunc(date)}</span>\n            </p>\n            <h3 className=\"text text_type_main-medium pb-6\">{name}</h3>\n            <div className={styles.content}>\n                <div className={styles.images}>\n                    {formatedIngredientsIDs()\n                        .map((ingredient, id) =>\n                            renderIngredientsImages(\n                                ingredients,\n                                ingredient,\n                                CircleIngredient,\n                                id,\n                                ingredientsIDs.length,\n                            ),\n                        )\n                        .reverse()}\n                </div>\n                <p className={`text text_type_digits-default pl-6 ${styles.price}`}>\n                    {orderSumFunc(ingredientsIDs, ingredients)}\n                    <span className={styles.price_icon}>\n                        <CurrencyIcon type=\"primary\" />\n                    </span>\n                </p>\n            </div>\n        </Link>\n    );\n};\n\nexport default FeedOrder;\n","import React, { ReactElement, useEffect } from 'react';\n\nimport styles from './profile-history.module.css';\nimport { WS_CONNECTION_CLOSED, WS_CONNECTION_START } from '../../../services/action-types/wsActionTypes';\nimport { useDispatch, useSelector } from '../../../services/hooks';\nimport { getCookie } from '../../../utils';\nimport FeedOrder from '../../feed/feed-order/feed-order';\nimport { TFeedOrder } from '../../feed/feed';\nimport { WS_URL } from '../../../services/constants';\n\nconst ProfileHistory = (): ReactElement => {\n    const orders = useSelector((store) => store.userFeed.orders);\n    const accessToken = getCookie('accessToken');\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch({\n            type: WS_CONNECTION_START,\n            payload: { url: `${WS_URL}?token=${accessToken}` },\n        });\n        return () => {\n            dispatch({ type: WS_CONNECTION_CLOSED });\n        };\n    }, []);\n\n    const content = !orders\n        ? null\n        : orders.map(({ _id, number, name, createdAt, ingredients }: TFeedOrder) => (\n              <FeedOrder key={_id} id={_id} number={number} name={name} date={createdAt} ingredientsIDs={ingredients} />\n          ));\n\n    return <div className={styles.main}>{content}</div>;\n};\n\nexport default ProfileHistory;\n","import React, { ReactElement } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport ProfileEdit from './profile-edit/profile-edit';\nimport ProfileHistory from './profile-history/profile-history';\nimport { TLocationState } from '../app/app-types';\n\nconst Profile = (): ReactElement => {\n    const { pathname } = useLocation<TLocationState>();\n\n    return pathname === '/react-burger/profile/orders' ? <ProfileHistory /> : <ProfileEdit />;\n};\n\nexport default Profile;\n","import React, { ReactElement, useCallback } from 'react';\n\nimport profileStyles from './profile.module.css';\nimport Profile from '../components/profile/profile';\nimport { Link, useLocation } from 'react-router-dom';\nimport { logoutRequest } from '../services/actions/auth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CommonStateType } from '../services/reducers/reducers-types';\n\nexport const ProfilePage = (): ReactElement | null => {\n    const user = useSelector((state: CommonStateType) => state.auth.user);\n    const { pathname } = useLocation();\n    const dispatch = useDispatch();\n\n    const activeRouteHandler = useCallback(\n        (path) => {\n            return path === pathname ? profileStyles.profile__link_isActive : profileStyles.profile__link;\n        },\n        [pathname],\n    );\n\n    const logout = useCallback(\n        (e) => {\n            e.preventDefault();\n            dispatch(logoutRequest());\n        },\n        [dispatch],\n    );\n\n    return user ? (\n        <div className={profileStyles.profile}>\n            <ul className={`pl-5 ${profileStyles.profile__list}`}>\n                <li className={profileStyles.profile__item}>\n                    <Link to=\"/profile\" className={`text text_type_main-medium ${activeRouteHandler('/profile')}`}>\n                        Профиль\n                    </Link>\n                </li>\n                <li className={profileStyles.profile__item}>\n                    <Link\n                        to=\"/profile/orders\"\n                        className={`text text_type_main-medium ${activeRouteHandler('/profile/orders')} ${\n                            profileStyles.profile__link\n                        }`}\n                    >\n                        История заказов\n                    </Link>\n                </li>\n                <li className={profileStyles.profile__item}>\n                    <Link\n                        onClick={logout}\n                        to=\"/\"\n                        className={`text text_type_main-medium ${profileStyles.profile__link}`}\n                    >\n                        Выход\n                    </Link>\n                </li>\n            </ul>\n            <Profile />\n        </div>\n    ) : null;\n};\n","import React, { ReactElement, useEffect, useState } from 'react';\n\nimport { useParams } from 'react-router-dom';\nimport ingredientStyles from './ingredient.module.css';\nimport { useSelector } from 'react-redux';\nimport { CommonStateType } from '../services/reducers/reducers-types';\nimport { TIngredient } from '../components/burger-ingredients/ingredient/ingredient-types';\nimport { TIngredientDetailsParams } from '../components/ingredient-details/ingredient-details-types';\n\nexport const Ingredient = (): ReactElement => {\n    const currentIngredients = useSelector((state: CommonStateType) => state.ingredients.ingredients);\n    const [currentIngredient, setCurrentIngredient] = useState<TIngredient>();\n    const { id } = useParams<TIngredientDetailsParams>();\n\n    useEffect(() => {\n        setCurrentIngredient(currentIngredients.filter((item: TIngredient) => item._id === id)[0]);\n    }, [currentIngredients, id]);\n\n    return (\n        currentIngredients && (\n            <div className={`${ingredientStyles.content} pt-10 pb-15 pl-10 pr-10`}>\n                <h2 className=\"text text_type_main-large\">Детали ингредиента</h2>\n                <img\n                    src={currentIngredient && currentIngredient.image_large}\n                    alt={currentIngredient && currentIngredient.name}\n                />\n                <p className=\"text text_type_main-medium mt-4 mb-8 ml-25 mr-25\">\n                    {currentIngredient && currentIngredient.name}\n                </p>\n                <table>\n                    <tbody>\n                        <tr className=\"text text_type_main-default text_color_inactive\">\n                            <th className={ingredientStyles.content__row}>Калории,ккал</th>\n                            <th className={ingredientStyles.content__row}>Белки, г</th>\n                            <th className={ingredientStyles.content__row}>Жиры, г</th>\n                            <th className={ingredientStyles.content__row}>Углеводы, г</th>\n                        </tr>\n                        <tr\n                            className={`${ingredientStyles.ingredient__details} text text_type_digits-default text_color_inactive`}\n                        >\n                            <td className={ingredientStyles.content__row}>\n                                {currentIngredient && currentIngredient.calories}\n                            </td>\n                            <td className={ingredientStyles.content__row}>\n                                {currentIngredient && currentIngredient.proteins}\n                            </td>\n                            <td className={ingredientStyles.content__row}>\n                                {currentIngredient && currentIngredient.fat}\n                            </td>\n                            <td className={ingredientStyles.content__row}>\n                                {currentIngredient && currentIngredient.carbohydrates}\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        )\n    );\n};\n","import React, { ReactElement } from 'react';\n\nimport feedStyles from './feed.module.css';\nimport FeedOrder from './feed-order/feed-order';\nimport { useSelector } from '../../services/hooks';\n\nexport type TFeedOrder = {\n    _id: string;\n    ingredients: Array<string>;\n    status: string;\n    name: string;\n    createdAt: string;\n    updatedAt: string;\n    number: number;\n};\n\nconst Feed = (): ReactElement => {\n    const orders = useSelector((store) => store.feed.orders);\n\n    const content = !orders\n        ? null\n        : orders.map(({ _id, number, name, createdAt, ingredients }: TFeedOrder) => (\n              <FeedOrder key={_id} id={_id} number={number} name={name} date={createdAt} ingredientsIDs={ingredients} />\n          ));\n\n    return <div className={feedStyles.list}>{content}</div>;\n};\n\nexport default Feed;\n","import React, { FC } from 'react';\n\nimport styles from './orders.module.css';\nimport { TFeedOrder } from '../feed';\n\ntype TOrdersProps = {\n    total: number;\n    totalToday: number;\n    orders: Array<TFeedOrder>;\n};\n\nconst Orders: FC<TOrdersProps> = ({ total, totalToday, orders }) => {\n    const readyOrders = orders.filter((order) => order.status === 'done').slice(0, 5);\n    const cookingOrders = orders.filter((order) => order.status !== 'done').slice(0, 5);\n\n    return (\n        <section className={styles.main}>\n            <div className=\"mr-9\">\n                <h4 className=\"text text_type_main-medium\">Готовы:</h4>\n                <ul className={styles.orders__list}>\n                    {readyOrders.map((order, index) => (\n                        <li key={index} className={`text text_type_digits-default ${styles.orders__item_done}`}>\n                            {order.number}\n                        </li>\n                    ))}\n                </ul>\n            </div>\n            <div className={styles.orders}>\n                <h4 className=\"text text_type_main-medium\">В работе:</h4>\n                <ul className={styles.orders__list}>\n                    {cookingOrders.map((order, index) => (\n                        <li key={index} className={`text text_type_digits-default ${styles.orders__item}`}>\n                            {order.number}\n                        </li>\n                    ))}\n                </ul>\n            </div>\n            <div className=\"text text_type_main-medium mt-10 mb-10\">\n                Выполнено за все время <br />\n                <span className={`text text_type_digits-large ${styles.digits_shadow}`}>{total}</span>\n            </div>\n            <div className=\"text text_type_main-medium\">\n                Выполнено за сегодня <br />\n                <span className={`text text_type_digits-large ${styles.digits_shadow}`}>{totalToday}</span>\n            </div>\n        </section>\n    );\n};\n\nexport default Orders;\n","import React, { ReactElement, useEffect } from 'react';\n\nimport Feed from '../components/feed/feed';\nimport { WS_CONNECTION_CLOSED, WS_CONNECTION_START } from '../services/action-types/wsActionTypes';\nimport { useDispatch } from 'react-redux';\nimport feedStyles from '../components/feed/feed.module.css';\nimport Orders from '../components/feed/orders/orders';\nimport { useSelector } from '../services/hooks';\n\nexport const OrderFeedPage = (): ReactElement => {\n    const dispatch = useDispatch();\n    const orders = useSelector((store) => store.feed.orders);\n    const { total, totalToday } = useSelector((store) => ({\n        total: store.feed.total,\n        totalToday: store.feed.totalToday,\n    }));\n\n    useEffect(() => {\n        dispatch({ type: WS_CONNECTION_START, payload: { url: 'wss://norma.nomoreparties.space/orders/all' } });\n        return () => {\n            dispatch({ type: WS_CONNECTION_CLOSED });\n        };\n    }, []);\n\n    return (\n        <div className={feedStyles.main}>\n            <h2 className=\"text text_type_main-large pt-10\">Лента заказов</h2>\n            <div className={feedStyles.orders}>\n                <Feed />\n                <Orders total={total} totalToday={totalToday} orders={orders} />\n            </div>\n        </div>\n    );\n};\n","import React, { ReactElement } from 'react';\nimport { useSelector } from '../../services/hooks';\n\nimport detailsStyles from './ingredient-details.module.css';\nimport { useParams } from 'react-router-dom';\nimport { TIngredientDetailsParams } from './ingredient-details-types';\nimport { CommonStateType } from '../../services/reducers/reducers-types';\nimport { TIngredient } from '../burger-ingredients/ingredient/ingredient-types';\n\nconst IngredientDetails = (): ReactElement => {\n    const { id } = useParams<TIngredientDetailsParams>();\n    const { image_large, name, calories, proteins, fat, carbohydrates } = useSelector(\n        (state: CommonStateType) => state.ingredients.ingredients.filter((item: TIngredient) => item._id === id)[0],\n    );\n\n    return (\n        <>\n            <img src={image_large} alt={name} />\n            <p className=\"text text_type_main-medium mt-4 mb-8 ml-25 mr-25\">{name}</p>\n            <table>\n                <tbody>\n                    <tr className=\"text text_type_main-default text_color_inactive\">\n                        <th>Калории,ккал</th>\n                        <th>Белки, г</th>\n                        <th>Жиры, г</th>\n                        <th>Углеводы, г</th>\n                    </tr>\n                    <tr\n                        className={`${detailsStyles.ingredient__details} text text_type_digits-default text_color_inactive`}\n                    >\n                        <td>{calories}</td>\n                        <td>{proteins}</td>\n                        <td>{fat}</td>\n                        <td>{carbohydrates}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </>\n    );\n};\n\nexport default IngredientDetails;\n","import {\n    REQUEST_URL,\n    GET_INGREDIENTS,\n    GET_INGREDIENTS_SUCCESS,\n    GET_INGREDIENTS_FAILED,\n    SET_ACTIVE_TAB,\n    INCREASE_INGREDIENT_COUNT,\n    DECREASE_INGREDIENT_COUNT,\n} from '../constants';\nimport { AppThunk, AppDispatch } from '../thunk-types';\nimport { TIngredient } from '../../components/burger-ingredients/ingredient/ingredient-types';\n\nexport const actionCreators = {\n    fetchIngredientsRequest: () => ({ type: GET_INGREDIENTS }),\n    fetchIngredientsRequestSuccess: (ingredients: Array<TIngredient>) => ({\n        type: GET_INGREDIENTS_SUCCESS,\n        ingredients,\n    }),\n    fetchIngredientsFailed: () => ({ type: GET_INGREDIENTS_FAILED }),\n};\n\nexport const fetchIngredientsRequest = () => {\n    return {\n        type: GET_INGREDIENTS,\n    };\n};\n\nexport const setIngredients = (ingredients: Array<TIngredient>) => {\n    return {\n        type: GET_INGREDIENTS_SUCCESS,\n        ingredients,\n    };\n};\n\nexport const fetchIngredientsFailed = () => {\n    return {\n        type: GET_INGREDIENTS_FAILED,\n    };\n};\n\nexport interface IGetIngredients {\n    readonly type: typeof GET_INGREDIENTS;\n}\n\nexport interface IGetIngredientsSuccess {\n    readonly type: typeof GET_INGREDIENTS_SUCCESS;\n    readonly ingredients: Array<TIngredient>;\n}\n\nexport interface IGetIngredientsFailed {\n    readonly type: typeof GET_INGREDIENTS_FAILED;\n}\n\nexport interface ISetActiveTab {\n    readonly type: typeof SET_ACTIVE_TAB;\n    readonly tab: string;\n}\n\nexport interface IIncreaseIngredientCount {\n    readonly type: typeof INCREASE_INGREDIENT_COUNT;\n    readonly ingredientId: string;\n}\n\nexport interface IDecreaseIngredientCount {\n    readonly type: typeof DECREASE_INGREDIENT_COUNT;\n    readonly ingredientId: string;\n}\n\nexport type TBurgerIngredientsActions =\n    | IGetIngredients\n    | IGetIngredientsSuccess\n    | IGetIngredientsFailed\n    | ISetActiveTab\n    | IIncreaseIngredientCount\n    | IDecreaseIngredientCount;\n\nexport const getIngredients: AppThunk = () => (dispatch: AppDispatch) => {\n    actionCreators.fetchIngredientsRequest();\n\n    fetch(REQUEST_URL + '/ingredients')\n        .then((res) => {\n            if (res && res.ok) {\n                res.json().then((res) => {\n                    dispatch(actionCreators.fetchIngredientsRequestSuccess(res.data));\n                });\n            } else {\n                actionCreators.fetchIngredientsFailed();\n            }\n        })\n        .catch(() => {\n            actionCreators.fetchIngredientsFailed();\n        });\n};\n","import React, { SyntheticEvent, useEffect } from 'react';\n\nimport { Switch, Route, useHistory, useLocation } from 'react-router-dom';\n\nimport AppHeader from '../app-header/app-header';\nimport styles from './app.module.css';\nimport ProtectedRoute from '../protected-route/ProtectedRoute';\nimport {\n    HomePage,\n    LoginPage,\n    RegisterPage,\n    NotFoundPage,\n    ForgotPasswordPage,\n    ResetPasswordPage,\n    ProfilePage,\n    Ingredient,\n    OrderFeedPage,\n    OrderPage,\n} from '../../pages';\nimport Modal from '../modal/modal';\nimport { useDispatch } from '../../services/hooks';\nimport IngredientDetails from '../ingredient-details/ingredient-details';\nimport { getUserInfo } from '../../services/actions/auth';\nimport { getCookie } from '../../utils';\nimport { getIngredients } from '../../services/actions/burger-ingredients';\nimport { TLocationState } from './app-types';\n\nfunction App() {\n    const history = useHistory();\n    const location: TLocationState = useLocation();\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        const token = getCookie('accessToken');\n        dispatch(getIngredients());\n        dispatch(getUserInfo(token));\n    }, [dispatch]);\n\n    const back = (e: KeyboardEvent | SyntheticEvent) => {\n        e.stopPropagation();\n        history.goBack();\n    };\n\n    const action = history.action === 'PUSH' || history.action === 'REPLACE';\n    const modalIngredientOpen = action && location.state && location.state.background;\n\n    return (\n        <>\n            <AppHeader />\n            <main className={styles.main}>\n                <Switch location={modalIngredientOpen || location}>\n                    <Route path=\"/react-burger/\" exact={true}>\n                        <HomePage />\n                    </Route>\n                    <ProtectedRoute path=\"/react-burger/login\" exact={true}>\n                        <LoginPage />\n                    </ProtectedRoute>\n                    <ProtectedRoute path=\"/react-burger/register\" exact={true}>\n                        <RegisterPage />\n                    </ProtectedRoute>\n                    <ProtectedRoute path=\"/react-burger/forgot-password\" exact={true}>\n                        <ForgotPasswordPage />\n                    </ProtectedRoute>\n                    <ProtectedRoute path=\"/react-burger/reset-password\" exact={true}>\n                        <ResetPasswordPage />\n                    </ProtectedRoute>\n                    <ProtectedRoute path=\"/react-burger/profile\" exact={true}>\n                        <ProfilePage />\n                    </ProtectedRoute>\n                    <Route path=\"/react-burger/ingredients/:id\" exact={true}>\n                        <Ingredient />\n                    </Route>\n                    <Route path=\"/react-burger/feed\" exact={true}>\n                        <OrderFeedPage />\n                    </Route>\n                    <Route>\n                        <NotFoundPage />\n                    </Route>\n                </Switch>\n                {modalIngredientOpen && (\n                    <Route path=\"/react-burger/ingredients/:id\">\n                        <Modal onClose={back}>\n                            <IngredientDetails />\n                        </Modal>\n                    </Route>\n                )}\n            </main>\n        </>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n            getCLS(onPerfEntry);\n            getFID(onPerfEntry);\n            getFCP(onPerfEntry);\n            getLCP(onPerfEntry);\n            getTTFB(onPerfEntry);\n        });\n    }\n};\n\nexport default reportWebVitals;\n","import {\n    GET_INGREDIENTS,\n    GET_INGREDIENTS_SUCCESS,\n    GET_INGREDIENTS_FAILED,\n    SET_ACTIVE_TAB,\n    INCREASE_INGREDIENT_COUNT,\n    DECREASE_INGREDIENT_COUNT,\n} from '../constants';\nimport { TIngredient } from '../../components/burger-ingredients/ingredient/ingredient-types';\nimport { TBurgerIngredientsActions } from '../actions/burger-ingredients';\n\ntype TIngredientsInitialState = {\n    ingredients: Array<TIngredient>;\n    ingredientsRequest: boolean;\n    ingredientsFailed: boolean;\n    activeTab: string;\n};\n\nconst initialState = {\n    ingredients: [],\n    ingredientsRequest: false,\n    ingredientsFailed: false,\n    activeTab: 'Булки',\n};\n\nexport const ingredientsReducer = (\n    state = initialState,\n    action: TBurgerIngredientsActions,\n): TIngredientsInitialState => {\n    switch (action.type) {\n        case GET_INGREDIENTS: {\n            return {\n                ...state,\n                ingredientsRequest: true,\n                ingredientsFailed: false,\n            };\n        }\n        case GET_INGREDIENTS_SUCCESS: {\n            return {\n                ...state,\n                ingredients: action.ingredients.map((ingredient) => ({\n                    ...ingredient,\n                    ingredientCount: 0,\n                    ingredientOrderCount: 0,\n                })),\n                ingredientsRequest: false,\n                ingredientsFailed: false,\n            };\n        }\n        case GET_INGREDIENTS_FAILED: {\n            return {\n                ...state,\n                ingredientsFailed: true,\n            };\n        }\n        case SET_ACTIVE_TAB: {\n            return {\n                ...state,\n                activeTab: action.tab,\n            };\n        }\n        case INCREASE_INGREDIENT_COUNT: {\n            return {\n                ...state,\n                ingredients: state.ingredients.map((ingredient: TIngredient) => {\n                    if (ingredient._id === action.ingredientId) {\n                        return {\n                            ...ingredient,\n                            ingredientCount: (ingredient.ingredientCount += 1),\n                        };\n                    }\n                    return ingredient;\n                }),\n            };\n        }\n        case DECREASE_INGREDIENT_COUNT: {\n            return {\n                ...state,\n                ingredients: state.ingredients.map((ingredient: TIngredient) => {\n                    if (ingredient._id === action.ingredientId) {\n                        return {\n                            ...ingredient,\n                            ingredientCount: (ingredient.ingredientCount -= 1),\n                        };\n                    }\n                    return ingredient;\n                }),\n            };\n        }\n        default: {\n            return state;\n        }\n    }\n};\n","import {\n    ADD_INGREDIENT,\n    REMOVE_INGREDIENT,\n    SET_TOTAL,\n    SET_INGREDIENT_INDEX,\n    SET_INGREDIENTS_IDS,\n    MOVE_CARD,\n} from '../constants';\nimport { TIngredient } from '../../components/burger-ingredients/ingredient/ingredient-types';\nimport { TConstructorListActions } from '../actions/constructor-list';\n\ntype TConstructorInitialState = {\n    bun: TIngredient | unknown;\n    ingredients: Array<TIngredient>;\n    total: number;\n    ingredientIDs: Array<string>;\n};\n\nconst ConstructorInitialState = {\n    bun: {},\n    ingredients: [],\n    total: 0,\n    ingredientIDs: [],\n};\n\nexport const constructorReducer = (\n    state = ConstructorInitialState,\n    action: TConstructorListActions,\n): TConstructorInitialState => {\n    switch (action.type) {\n        case ADD_INGREDIENT: {\n            if (action.ingredient.type === 'bun') {\n                return {\n                    ...state,\n                    bun: action.ingredient,\n                };\n            }\n            return {\n                ...state,\n                ingredients: (state.ingredients as Array<TIngredient>).concat(action.ingredient),\n            };\n        }\n        case REMOVE_INGREDIENT: {\n            return {\n                ...state,\n                ingredients: state.ingredients.filter((ingredient: TIngredient) => {\n                    return ingredient._id === action.id && ingredient.index === action.index ? null : ingredient;\n                }),\n            };\n        }\n        case SET_TOTAL: {\n            return {\n                ...state,\n                total: action.total,\n            };\n        }\n        case SET_INGREDIENT_INDEX: {\n            return {\n                ...state,\n                ingredients: state.ingredients.map((ingredient: TIngredient, index) => ({\n                    ...ingredient,\n                    index: index,\n                })),\n            };\n        }\n        case SET_INGREDIENTS_IDS: {\n            return {\n                ...state,\n                ingredientIDs: action.IDs,\n            };\n        }\n        case MOVE_CARD: {\n            const dragIngredient = state.ingredients.filter((i: TIngredient) => i.index === action.index)[0];\n            const newIngredients = [...state.ingredients];\n            newIngredients.splice(action.index, 1);\n            newIngredients.splice(action.atIndex, 0, dragIngredient);\n\n            return {\n                ...state,\n                ingredients: newIngredients,\n            };\n        }\n        default: {\n            return state;\n        }\n    }\n};\n","import { SET_INGREDIENT_DETAILS, REMOVE_INGREDIENT_DETAILS } from '../constants';\nimport { TIngredientDetailsActions } from '../actions/ingredient-details';\nimport { TIngredientDetails } from '../actions/ingredient-details';\n\ntype TIngredientDetailsState = TIngredientDetails;\n\nconst IngredientInitialState = {\n    image_large: '',\n    name: '',\n    calories: '',\n    proteins: '',\n    fat: '',\n    carbohydrates: '',\n};\n\nexport const ingredientDetailsReducer = (\n    state = IngredientInitialState,\n    action: TIngredientDetailsActions,\n): TIngredientDetailsState => {\n    switch (action.type) {\n        case SET_INGREDIENT_DETAILS: {\n            return {\n                ...action.details,\n            };\n        }\n        case REMOVE_INGREDIENT_DETAILS: {\n            return IngredientInitialState;\n        }\n        default: {\n            return state;\n        }\n    }\n};\n","import { GET_ORDER_NUMBER, GET_ORDER_NUMBER_SUCCESS, GET_ORDER_NUMBER_FAILED, RESET_ORDER_NUMBER } from '../constants';\nimport { TOrderDetailsActions } from '../actions/order-details';\n\ntype TOrderDetailsInitialState = {\n    number: number | undefined;\n    orderNumberRequest: boolean;\n    orderNumberFailed: boolean;\n};\n\nconst initialState = {\n    number: undefined,\n    orderNumberRequest: false,\n    orderNumberFailed: false,\n};\n\nexport const orderDetailsReducer = (state = initialState, action: TOrderDetailsActions): TOrderDetailsInitialState => {\n    switch (action.type) {\n        case GET_ORDER_NUMBER: {\n            return {\n                ...state,\n                orderNumberRequest: true,\n            };\n        }\n        case GET_ORDER_NUMBER_SUCCESS: {\n            return {\n                ...state,\n                orderNumberRequest: false,\n                orderNumberFailed: false,\n                number: action.number,\n            };\n        }\n        case GET_ORDER_NUMBER_FAILED: {\n            return {\n                ...state,\n                orderNumberRequest: false,\n                orderNumberFailed: true,\n            };\n        }\n        case RESET_ORDER_NUMBER: {\n            return initialState;\n        }\n        default: {\n            return state;\n        }\n    }\n};\n","import {\n    REGISTER_USER,\n    REGISTER_USER_SUCCESS,\n    REGISTER_USER_FAILED,\n    AUTHORIZE_USER,\n    AUTHORIZE_USER_SUCCESS,\n    AUTHORIZE_USER_FAILED,\n    REFRESH_TOKEN,\n    REFRESH_TOKEN_SUCCESS,\n    REFRESH_TOKEN_FAILED,\n    LOGOUT,\n    LOGOUT_SUCCESS,\n    LOGOUT_FAILED,\n    SET_USER,\n    SET_PASSWORD_RESET,\n    GET_USER_SUCCESS,\n    GET_USER_FAILED,\n} from '../constants';\nimport { TAuthUserActions } from '../actions/auth';\n\ntype TAuthInitialState = {\n    user: {\n        name: string;\n        email: string;\n    } | null;\n    userDataRequest: boolean;\n    userDataFailed: boolean;\n    passwordReset: boolean;\n};\n\nconst initialUserState = {\n    user: null,\n    userDataRequest: true,\n    userDataFailed: false,\n    passwordReset: false,\n};\n\nexport const authReducer = (state = initialUserState, action: TAuthUserActions): TAuthInitialState => {\n    switch (action.type) {\n        case GET_USER_SUCCESS: {\n            return {\n                ...state,\n                user: action.user,\n                userDataRequest: false,\n            };\n        }\n        case GET_USER_FAILED: {\n            return {\n                ...state,\n                userDataRequest: false,\n                userDataFailed: true,\n            };\n        }\n        case SET_USER: {\n            return {\n                ...state,\n                user: action.user,\n            };\n        }\n        case REGISTER_USER: {\n            return {\n                ...state,\n                userDataRequest: true,\n            };\n        }\n        case REGISTER_USER_SUCCESS: {\n            return {\n                ...state,\n                user: action.user,\n                userDataRequest: false,\n                userDataFailed: false,\n            };\n        }\n        case REGISTER_USER_FAILED: {\n            return {\n                ...state,\n                userDataFailed: true,\n            };\n        }\n        case AUTHORIZE_USER: {\n            return {\n                ...state,\n                userDataRequest: true,\n            };\n        }\n        case AUTHORIZE_USER_SUCCESS: {\n            return {\n                ...state,\n                user: action.user,\n                userDataRequest: false,\n                userDataFailed: false,\n            };\n        }\n        case AUTHORIZE_USER_FAILED: {\n            return {\n                ...state,\n                userDataFailed: true,\n            };\n        }\n        case REFRESH_TOKEN: {\n            return {\n                ...state,\n                userDataRequest: true,\n            };\n        }\n        case REFRESH_TOKEN_SUCCESS: {\n            return {\n                ...state,\n                userDataRequest: false,\n                userDataFailed: false,\n            };\n        }\n        case REFRESH_TOKEN_FAILED: {\n            return {\n                ...state,\n                userDataFailed: true,\n            };\n        }\n        case LOGOUT: {\n            return {\n                ...state,\n                userDataRequest: true,\n            };\n        }\n        case LOGOUT_SUCCESS: {\n            return {\n                ...state,\n                user: action.user,\n                userDataRequest: false,\n                userDataFailed: false,\n            };\n        }\n        case LOGOUT_FAILED: {\n            return {\n                ...state,\n                userDataFailed: true,\n            };\n        }\n        case SET_PASSWORD_RESET: {\n            return {\n                ...state,\n                passwordReset: action.passwordIsReset,\n            };\n        }\n        default: {\n            return state;\n        }\n    }\n};\n","import {\n    WS_CONNECTION_SUCCESS,\n    WS_CONNECTION_ERROR,\n    WS_CONNECTION_CLOSED,\n    WS_GET_MESSAGE,\n} from '../action-types/wsActionTypes';\nimport { TWsActions } from '../action-types/wsActionTypes';\nimport { TFeedOrder } from '../../components/feed/feed';\n\ntype TWSState = {\n    wsConnected: boolean;\n    orders: Array<TFeedOrder>;\n    total: number;\n    totalToday: number;\n    error?: Event;\n};\n\nconst initialState: TWSState = {\n    wsConnected: false,\n    orders: [],\n    total: 0,\n    totalToday: 0,\n};\n\nexport const wsFeedReducer = (state = initialState, action: TWsActions): TWSState => {\n    switch (action.type) {\n        case WS_CONNECTION_SUCCESS:\n            return {\n                ...state,\n                error: undefined,\n                wsConnected: true,\n            };\n        case WS_CONNECTION_ERROR:\n            return {\n                ...state,\n                error: action.payload,\n                wsConnected: false,\n            };\n        case WS_CONNECTION_CLOSED:\n            return {\n                ...state,\n                error: undefined,\n                wsConnected: false,\n            };\n        case WS_GET_MESSAGE:\n            const { orders, total, totalToday } = action.payload;\n            return {\n                ...state,\n                error: undefined,\n                orders: [...orders],\n                total,\n                totalToday,\n            };\n        default:\n            return state;\n    }\n};\n","import {\n    WS_CONNECTION_SUCCESS,\n    WS_CONNECTION_ERROR,\n    WS_CONNECTION_CLOSED,\n    WS_GET_MESSAGE,\n} from '../action-types/wsActionTypes';\nimport { TWsActions } from '../action-types/wsActionTypes';\nimport { TFeedOrder } from '../../components/feed/feed';\n\ntype TWSState = {\n    wsConnected: boolean;\n    orders: Array<TFeedOrder>;\n    total: number;\n    totalToday: number;\n    error?: Event;\n};\n\nconst initialState: TWSState = {\n    wsConnected: false,\n    orders: [],\n    total: 0,\n    totalToday: 0,\n};\n\nexport const wsUserFeedReducer = (state = initialState, action: TWsActions): TWSState => {\n    switch (action.type) {\n        case WS_CONNECTION_SUCCESS:\n            return {\n                ...state,\n                error: undefined,\n                wsConnected: true,\n            };\n        case WS_CONNECTION_ERROR:\n            return {\n                ...state,\n                error: action.payload,\n                wsConnected: false,\n            };\n        case WS_CONNECTION_CLOSED:\n            return {\n                ...state,\n                error: undefined,\n                wsConnected: false,\n            };\n        case WS_GET_MESSAGE:\n            const { orders } = action.payload;\n            return {\n                ...state,\n                error: undefined,\n                orders: [...orders.reverse()],\n            };\n        default:\n            return state;\n    }\n};\n","import { combineReducers } from 'redux';\n\nimport { ingredientsReducer } from './burger-ingredients';\nimport { constructorReducer } from './constructor-list';\nimport { ingredientDetailsReducer } from './ingredient-details';\nimport { orderDetailsReducer } from './order-details';\nimport { authReducer } from './auth';\nimport { wsFeedReducer } from './wsFeedReducer';\nimport { wsUserFeedReducer } from './wsUserFeedReducer';\n\nexport const rootReducer = combineReducers({\n    ingredients: ingredientsReducer,\n    burger: constructorReducer,\n    details: ingredientDetailsReducer,\n    order: orderDetailsReducer,\n    auth: authReducer,\n    feed: wsFeedReducer,\n    userFeed: wsUserFeedReducer,\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport './index.css';\nimport './normalize.css';\nimport App from './components/app/app.tsx';\nimport reportWebVitals from './reportWebVitals';\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport thunk from 'redux-thunk';\nimport { rootReducer } from './services/reducers';\nimport { socketMiddleware } from './services/middlewares/socketMiddleware';\n\nconst composeEnhancers =\n    typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n        ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n        : compose;\nconst enhancer = composeEnhancers(applyMiddleware(socketMiddleware(), thunk));\n\nexport const store = createStore(rootReducer, enhancer);\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <Router>\n                <App />\n            </Router>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import type { Middleware, MiddlewareAPI } from 'redux';\n\nimport type { AppDispatch, RootState } from '../thunk-types';\nimport { IWsConnectionStart, TWsActions } from '../action-types/wsActionTypes';\nimport {\n    WS_CONNECTION_START,\n    WS_CONNECTION_SUCCESS,\n    WS_CONNECTION_ERROR,\n    WS_GET_MESSAGE,\n    WS_CONNECTION_CLOSED,\n} from '../action-types/wsActionTypes';\n\nexport const socketMiddleware = (): Middleware => {\n    return (store: MiddlewareAPI<AppDispatch, RootState>) => {\n        let socket: WebSocket | null = null;\n\n        return (next) => (action: TWsActions) => {\n            const { dispatch } = store;\n            const { type } = action;\n\n            if (type === WS_CONNECTION_START) {\n                const { payload } = action as IWsConnectionStart;\n                socket = new WebSocket(payload.url);\n            }\n\n            if (socket?.readyState === 1 && type === WS_CONNECTION_CLOSED) {\n                socket?.close();\n            }\n\n            if (socket) {\n                socket.onopen = () => {\n                    dispatch({ type: WS_CONNECTION_SUCCESS });\n                };\n\n                socket.onerror = (event) => {\n                    dispatch({ type: WS_CONNECTION_ERROR, payload: event });\n                };\n\n                socket.onmessage = (event) => {\n                    const { data } = event;\n                    const parsedData = JSON.parse(data);\n                    const { success, ...restData } = parsedData;\n                    success && dispatch({ type: WS_GET_MESSAGE, payload: restData });\n                };\n\n                socket.onclose = (event) => {\n                    dispatch({ type: WS_CONNECTION_CLOSED, payload: event });\n                    if (event.wasClean) {\n                        console.log(`Соединение закрыто - код ${event.code}`);\n                    } else {\n                        console.log(`Соединение закрыто некорректно. Код закрытия - ${event.code}`);\n                    }\n                };\n            }\n\n            next(action);\n        };\n    };\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ingredient_content__2wfoi\",\"content__row\":\"ingredient_content__row__1nruG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"profile_profile__3ILEA\",\"profile__list\":\"profile_profile__list__29WJM\",\"profile__item\":\"profile_profile__item__VS3tE\",\"profile__link\":\"profile_profile__link__31dwo\",\"profile__link_isActive\":\"profile_profile__link_isActive__2ETcy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"orders_main__3Akh7\",\"orders\":\"orders_orders__G9wk0\",\"orders__list\":\"orders_orders__list__2qpc7\",\"orders__item\":\"orders_orders__item__3-_r8\",\"orders__item_done\":\"orders_orders__item_done__3b0ea\",\"digits_shadow\":\"orders_digits_shadow__1gDhh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order__number\":\"order-details_order__number__g-Ijp\",\"order__text_type_centered\":\"order-details_order__text_type_centered__3PJ2m\",\"order__done\":\"order-details_order__done__7rqou\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"feed-order_main__1r59F\",\"order\":\"feed-order_order__37rFE\",\"date\":\"feed-order_date__38zoS\",\"content\":\"feed-order_content__1WTk-\",\"images\":\"feed-order_images__3VMfy\",\"image\":\"feed-order_image__yTNAJ\",\"price\":\"feed-order_price__2D46_\",\"price_icon\":\"feed-order_price_icon__3Uwpl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order_main__389Vy\",\"number\":\"order_number__2AdHP\",\"status\":\"order_status__3ZdKQ\",\"order\":\"order_order__R161H\",\"ingredients\":\"order_ingredients__3tnMK\",\"data\":\"order_data__4p_FN\",\"price\":\"order_price__CU2Ms\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commonList\":\"constructor-list_commonList__1nC8T\",\"bothSides\":\"constructor-list_bothSides__Wbksy\",\"constructorList\":\"constructor-list_constructorList__3Xp6w\",\"item\":\"constructor-list_item__34E6w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup__overlay\":\"popup_popup__overlay__3Irdv\",\"popup__content\":\"popup_popup__content__2rz1q\",\"popup__base\":\"popup_popup__base__2xfxg\",\"popup__cross\":\"popup_popup__cross__1aBBL\",\"popup__text_type_centered\":\"popup_popup__text_type_centered__33PIb\",\"popup__title\":\"popup_popup__title__2Cb17\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"register_main__425LN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1iHLW\",\"header__nav\":\"app-header_header__nav__1wJFs\",\"header__list\":\"app-header_header__list__3y_7Q\",\"header__logo\":\"app-header_header__logo__27E10\",\"header__link\":\"app-header_header__link__Qgbfo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputs\":\"profile-edit_inputs__nd_Z9\",\"input_isActive\":\"profile-edit_input_isActive__W48N2\",\"info_change\":\"profile-edit_info_change__1Hmmg\",\"info_cancel\":\"profile-edit_info_cancel__1HjpM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"feed_main__3HiF9\",\"orders\":\"feed_orders__hw0P4\",\"list\":\"feed_list__2Cndy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"ingredients_ingredients__BIdYV\",\"ingredients__list\":\"ingredients_ingredients__list__3bYsD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"ingredient_ingredient__1cRdv\",\"ingredient__priceWrapper\":\"ingredient_ingredient__priceWrapper__1lBHr\",\"ingredient__price\":\"ingredient_ingredient__price__11emp\",\"ingredient__name\":\"ingredient_ingredient__name__1un8n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"circle-ingredient_main__Rakh0\",\"image\":\"circle-ingredient_image__320JN\",\"image_background\":\"circle-ingredient_image_background__1awif\",\"total_ingredients\":\"circle-ingredient_total_ingredients__1usbO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header__item\":\"app-header-item_header__item__3wD1r\",\"header__iconWrapper\":\"app-header-item_header__iconWrapper__21pc-\",\"header__link\":\"app-header-item_header__link__3HjHB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"burger-ingredients_ingredients__2TY9H\",\"ingredients__loading\":\"burger-ingredients_ingredients__loading__15n-p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor__total\":\"constructor-cart_constructor__total__3U_YT\",\"constructor__price\":\"constructor-cart_constructor__price__3TReF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-ingredient_main__1Ix9O\",\"price\":\"order-ingredient_price__33FAt\"};"],"sourceRoot":""}