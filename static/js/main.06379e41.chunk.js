(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{115:function(e,t,n){e.exports={main:"app_main__3yfFw",centered:"app_centered__8OSiy"}},116:function(e,t,n){e.exports={main:"home_main__3hh9x",centered:"home_centered__33pkz"}},117:function(e,t,n){e.exports={ingredients__tabs:"ingredients-tabs_ingredients__tabs__xvA8f"}},119:function(e,t,n){e.exports={constructor:"burger-constructor_constructor__2Wifa"}},12:function(e,t,n){e.exports={auth:"auth-form_auth__3BJcu",auth__text:"auth-form_auth__text__VY6oV",auth__link:"auth-form_auth__link__1no8Q",form:"auth-form_form__1d4QB",title:"auth-form_title__3QMLn"}},122:function(e,t,n){e.exports={main:"login_main__1908J"}},124:function(e,t,n){e.exports={main:"profile-history_main__3tCDd"}},125:function(e,t,n){e.exports={ingredient__details:"ingredient-details_ingredient__details__2WGWX"}},138:function(e,t,n){},139:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Un}));var r=n(1),c=n.n(r),a=n(41),i=n.n(a),s=n(10),o=n(8),u=(n(138),n(139),n(14)),d=n(7),l=n(44),_=n.n(l),j=n(69),b=n.n(j),p=n(0),m=function(e){var t=e.text,n=e.path,r=void 0===n?"/":n,c=e.setHover,a=e.children,i=Object(u.h)().pathname!==r?"text_color_inactive":"";return Object(p.jsx)("li",{className:"mt-4 mb-4 pt-4 pb-4 pl-5 pr-5 ".concat(b.a.header__item),children:Object(p.jsxs)(o.c,{to:r,className:a?"mr-2 ".concat(b.a.header__iconWrapper):"",children:[a,Object(p.jsx)("p",{className:"text text_type_main-default ".concat(i," ").concat(b.a.header__link),onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:t})]})})},O=n(5),h=function(){var e=Object(u.h)().pathname,t=Object(r.useState)(!1),n=Object(d.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(!1),s=Object(d.a)(i,2),l=s[0],j=s[1],b=Object(r.useState)(!1),h=Object(d.a)(b,2),f=h[0],x=h[1];return Object(p.jsx)("header",{className:_.a.header,children:Object(p.jsx)("nav",{className:_.a.header__nav,children:Object(p.jsxs)("ul",{className:_.a.header__list,children:[Object(p.jsx)(m,{text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",path:"/react-burger/",setHover:a,children:Object(p.jsx)(O.BurgerIcon,{type:"/react-burger/"===e||c?"primary":"secondary"})}),Object(p.jsx)(m,{text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",path:"/react-burger/feed",setHover:j,children:Object(p.jsx)(O.ListIcon,{type:"/react-burger/feed"===e||l?"primary":"secondary"})}),Object(p.jsx)("li",{className:"mt-4 mb-4 ".concat(_.a.header__logo),children:Object(p.jsx)(o.b,{className:_.a.header__link,to:"/react-burger/",children:Object(p.jsx)(O.Logo,{})})}),Object(p.jsx)(m,{text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",path:"/react-burger/profile",setHover:x,children:Object(p.jsx)(O.ProfileIcon,{type:"/react-burger/profile"===e||f?"primary":"secondary"})})]})})})},f=n(115),x=n.n(f),g=n(2),y=n(62),v=s.c,N=function(){return Object(s.b)()},E=function(e){var t=e.children,n=e.path,r=Object(y.a)(e,["children","path"]),c=v((function(e){return e.auth.user})),a=Object(u.h)();return!c||"/react-burger/login"!==n&&"/react-burger/register"!==n&&"/react-burger/forgot-password"!==n&&"/react-burger/reset-password"!==n?Object(p.jsx)(u.b,Object(g.a)(Object(g.a)({},r),{},{render:function(){return c||"/react-burger/profile"!==n?t:Object(p.jsx)(u.a,{to:{pathname:"/react-burger/login"}})}})):Object(p.jsx)(u.a,{to:{pathname:"/",state:a}})},C=n(217),T=n(128),S=n(116),I=n.n(S),k=n(70),w=n.n(k),R=n(117),D=n.n(R),F=function(e){var t=e.activeMeal,n=e.changeMeal;return Object(p.jsxs)("div",{className:D.a.ingredients__tabs,children:[Object(p.jsx)(O.Tab,{value:"\u0411\u0443\u043b\u043a\u0438",active:"\u0411\u0443\u043b\u043a\u0438"===t,onClick:n,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(p.jsx)(O.Tab,{value:"\u0421\u043e\u0443\u0441\u044b",active:"\u0421\u043e\u0443\u0441\u044b"===t,onClick:n,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(p.jsx)(O.Tab,{value:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",active:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"===t,onClick:n,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]})},A=n(71),L="https://norma.nomoreparties.space/api",U="wss://norma.nomoreparties.space/orders",G="GET_USER_SUCCESS",z="GET_USER_FAILED",B="SET_USER",P="REGISTER_USER",q="REGISTER_USER_SUCCESS",H="REGISTER_USER_FAILED",M="AUTHORIZE_USER",W="AUTHORIZE_USER_SUCCESS",J="AUTHORIZE_USER_FAILED",V="REFRESH_TOKEN",X="REFRESH_TOKEN_SUCCESS",Q="REFRESH_TOKEN_FAILED",K="LOGOUT",Y="LOGOUT_SUCCESS",Z="LOGOUT_FAILED",$="SET_PASSWORD_RESET",ee="GET_INGREDIENTS",te="GET_INGREDIENTS_SUCCESS",ne="GET_INGREDIENTS_FAILED",re="SET_ACTIVE_TAB",ce="INCREASE_INGREDIENT_COUNT",ae="DECREASE_INGREDIENT_COUNT",ie="ADD_INGREDIENT",se="REMOVE_INGREDIENT",oe="SET_TOTAL",ue="SET_INGREDIENT_INDEX",de="SET_INGREDIENTS_IDS",le="MOVE_CARD",_e="SET_INGREDIENT_DETAILS",je="REMOVE_INGREDIENT_DETAILS",be="GET_ORDER_NUMBER",pe="GET_ORDER_NUMBER_SUCCESS",me="GET_ORDER_NUMBER_FAILED",Oe="RESET_ORDER_NUMBER",he=n(55),fe=n.n(he),xe=n(219),ge=n(56),ye=n.n(ge),ve=function(e){var t=e.ingredient,n=Object(xe.a)({type:"ingredient",item:t}),r=Object(d.a)(n,2)[1],c=Object(u.h)();return Object(p.jsxs)(o.b,{to:{pathname:"/react-burger/ingredients/".concat(t._id),state:{background:c}},ref:r,className:ye.a.ingredient,children:[Object(p.jsx)("img",{src:t.image,alt:t.name}),Object(p.jsxs)("div",{className:"".concat(ye.a.ingredient__priceWrapper," text text_type_digits-default mt-1 mb-1"),children:[Object(p.jsx)("p",{className:"".concat(ye.a.ingredient__price," mr-2"),children:t.price}),Object(p.jsx)(O.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)("p",{className:"text text_type_main-default ".concat(ye.a.ingredient__name),children:t.name}),t.ingredientCount&&t.ingredientCount>0?Object(p.jsx)(O.Counter,{count:t.ingredientCount,size:"default"}):null]})},Ne=function(e){var t=e.data,n=N(),r=function(e,t){var r;e&&n({type:re,tab:null===(r=t.target.firstElementChild)||void 0===r?void 0:r.innerHTML})};return Object(p.jsxs)("div",{className:"".concat(fe.a.ingredients," mt-10 mb-6 pl-1 pr-1"),children:[" ",Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(A.a,{as:"div",threshold:.8,onChange:r,children:[Object(p.jsx)("h4",{className:"text text_type_main-medium mb-6",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(p.jsx)("ul",{className:fe.a.ingredients__list,children:t.map((function(e){return"bun"!==e.type?null:Object(p.jsx)(ve,{ingredient:e},e._id)}))})]}),Object(p.jsxs)(A.a,{as:"div",threshold:.5,onChange:r,children:[Object(p.jsx)("h4",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(p.jsx)("ul",{className:fe.a.ingredients__list,children:t.map((function(e){return"sauce"!==e.type?null:Object(p.jsx)(ve,{ingredient:e},e._id)}))})]}),Object(p.jsxs)(A.a,{as:"div",threshold:.2,onChange:r,children:[Object(p.jsx)("h4",{className:"text text_type_main-medium mb-6",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(p.jsx)("ul",{className:fe.a.ingredients__list,children:t.map((function(e){return"main"!==e.type?null:Object(p.jsx)(ve,{ingredient:e},e._id)}))})]})]})]})},Ee=function(){var e=v((function(e){return{ingredients:e.ingredients.ingredients,isLoading:e.ingredients.ingredientsRequest,hasError:e.ingredients.ingredientsFailed,activeTab:e.ingredients.activeTab}})),t=e.ingredients,n=e.isLoading,r=e.hasError,c=e.activeTab,a=N(),i=r?Object(p.jsx)("div",{className:"text text_type_main-medium ".concat(w.a.ingredients__loading),children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}):n||r||!t.length?Object(p.jsx)("div",{className:"text text_type_main-large ".concat(w.a.ingredients__loading),children:"\u0417\u0434\u0435\u0441\u044c \u0412\u044b \u0443\u0432\u0438\u0434\u0438\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u0431\u0443\u0440\u0433\u0435\u0440\u0430 ..."}):Object(p.jsx)(Ne,{data:t});return Object(p.jsxs)("section",{className:"".concat(w.a.ingredients," ml-5 mr-10 pt-10"),children:[Object(p.jsx)("h2",{className:"text text_type_main-large pb-2",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(p.jsx)(F,{activeMeal:c,changeMeal:function(e){var t="";switch(e){case"\u0411\u0443\u043b\u043a\u0438":t="\u0411\u0443\u043b\u043a\u0438";break;case"\u0421\u043e\u0443\u0441\u044b":t="\u0421\u043e\u0443\u0441\u044b";break;case"\u041d\u0430\u0447\u0438\u043d\u043a\u0438":t="\u041d\u0430\u0447\u0438\u043d\u043a\u0438";break;default:t="\u0411\u0443\u043b\u043a\u0438"}a({type:re,tab:t})}}),i]})},Ce=n(119),Te=n.n(Ce),Se=n(220),Ie=n(37),ke=n.n(Ie),we=Object(r.memo)((function(e){var t=e.ingredient,n=e.index,c=e.moveCard,a=e.setIngredientsIndex,i=Object(r.useRef)(null),s=t._id,o=t.name,u=t.price,l=t.image,_=N(),j=Object(Se.a)({accept:"card",hover:function(e,t){var r,a=e.index,s=n;if(a!==s){var o=null===(r=i.current)||void 0===r?void 0:r.getBoundingClientRect();console.log(o);var u=(o.bottom-o.top)/2,d=t.getClientOffset().y-o.top;a<s&&d<u||a>s&&d>u||(c(a,s),e.index=s)}}}),b=Object(d.a)(j,2)[1],m=Object(xe.a)({type:"card",item:function(){return{_id:s,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),h=Object(d.a)(m,2),f=h[0].isDragging,x=h[1];Object(r.useEffect)((function(){a()}),[t.index,a]);var g=f?0:1;return x(b(i)),Object(p.jsxs)("article",{ref:i,style:{opacity:g},onClick:function(e){return function(e,t,n){e.target.closest(".constructor-element__action")&&(_({type:se,id:t,index:n}),_({type:ae,ingredientId:s}))}(e,s,n)},className:ke.a.item,children:[Object(p.jsx)(O.DragIcon,{type:"primary"}),Object(p.jsx)(O.ConstructorElement,{text:o,price:u,thumbnail:l})]})})),Re=Object(r.memo)((function(){var e=v((function(e){return{bun:e.burger.bun,ingredients:e.burger.ingredients}})),t=e.bun,n=e.ingredients,c=N(),a=function(e,t){c({type:le,index:e,atIndex:t})},i=Object(Se.a)({accept:"ingredient",drop:function(e){c({type:ie,ingredient:e}),c({type:ce,ingredientId:e._id})}}),s=Object(d.a)(i,2)[1],o=Object(r.useCallback)((function(){var e=2*t.price;n.forEach((function(t){"bun"!==t.type&&(e+=t.price)})),c({type:oe,total:e})}),[n,t.price,c]),u=Object(r.useCallback)((function(){var e=n.map((function(e){return e._id})).concat(t._id);c({type:de,IDs:e})}),[n,t._id,c]);Object(r.useEffect)((function(){o(),u()}),[t,n,o,u]);var l=Object(r.useCallback)((function(){c({type:ue})}),[c]),_=Object(p.jsx)("article",{className:ke.a.bothSides,children:Object(p.jsx)(O.ConstructorElement,{type:"top",isLocked:!0,text:t.name+" (\u0432\u0435\u0440\u0445)",price:t.price,thumbnail:t.image})}),j=Object(p.jsx)("article",{className:ke.a.bothSides,children:Object(p.jsx)(O.ConstructorElement,{type:"bottom",isLocked:!0,text:t.name+" (\u043d\u0438\u0437)",price:t.price,thumbnail:t.image})}),b=Object(p.jsx)("div",{className:ke.a.constructorList,children:n.length?n.map((function(e,t){return function(e,t){return Object(p.jsx)(we,{ingredient:e,index:t,moveCard:a,setIngredientsIndex:l},t)}(e,t)})):Object(p.jsx)("h3",{className:"text text_type_main-medium text_color_inactive pl-10 pt-1 pl-7",children:"\u0410 \u0442\u0435\u043f\u0435\u0440\u044c \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u0431\u0443\u0440\u0433\u0435\u0440\u0430"})}),m=Object.keys(t).length?Object(p.jsxs)(p.Fragment,{children:[_," ",b," ",j]}):Object(p.jsx)("h3",{className:"text text_type_main-medium pt-10 text_color_inactive",children:"\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443 \u0434\u043b\u044f \u0431\u0443\u0440\u0433\u0435\u0440\u0430 - \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0435\u0435 \u043f\u0440\u044f\u043c\u043e \u0441\u044e\u0434\u0430"});return Object(p.jsx)("div",{ref:s,onDrop:function(e){return e.preventDefault()},className:ke.a.commonList,children:m})})),De=n(92),Fe=n.n(De),Ae=n(38),Le=n.n(Ae),Ue=function(e){var t=e.onClose,n=e.children;return Object(p.jsx)("div",{className:Le.a.popup__overlay,onClick:t,children:n})},Ge=document.getElementById("react-modals"),ze=function(e){var t=e.title,n=e.onClose,c=e.children;return Object(r.useEffect)((function(){function e(e){"Escape"===e.key&&n(e)}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[n]),Object(a.createPortal)(Object(p.jsx)(Ue,{onClose:n,children:Object(p.jsxs)("div",{className:"".concat(Le.a.popup__content," pt-10 pb-15 pl-10 pr-10"),onClick:function(e){return e.stopPropagation()},children:[Object(p.jsxs)("div",{className:"mb-4 ".concat(Le.a.popup__base),children:[t&&Object(p.jsx)("h3",{className:"text text_type_main-large ".concat(Le.a.popup__title),children:t}),Object(p.jsx)("div",{onClick:n,className:Le.a.popup__cross,children:Object(p.jsx)(O.CloseIcon,{type:"primary"})})]}),c]})}),Ge)},Be=n(33),Pe=n.n(Be),qe=n.p+"static/media/done.7341dd32.svg",He=(n(120),n(61)),Me=n(218),We=n(127),Je=n(121),Ve=n(129),Xe=n(221),Qe=function(e,t,n){t(Object(g.a)(Object(g.a)({},n),{},Object(He.a)({},e.target.name,e.target.value)))},Ke=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n=Object(g.a)({path:"/"},n)).expires;if("number"==typeof r&&r){var c=new Date;c.setTime(c.getTime()+1e3*r),r=n.expires=c}"string"!=typeof r&&r&&r.toUTCString&&(n.expires=r.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var i in n){a+="; "+i;var s=n[i];!0!==s&&(a+="="+s)}document.cookie=a};function Ye(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var Ze=function(e){var t="",n=new Date(e);return Object(Je.a)(n)?t+="\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ":Object(Ve.a)(n)?t+="\u0412\u0447\u0435\u0440\u0430, ":t+="".concat(Object(We.a)(n,{locale:Xe.a})," \u043d\u0430\u0437\u0430\u0434, "),t+"\n    ".concat(Object(Me.a)(new Date(n),"H:mm",{locale:Xe.a}),"\n    i-").concat(Object(Me.a)(new Date(n),"z",{locale:Xe.a})," \n  ")},$e=function(e,t){var n=0;return e.forEach((function(e){var r=t.find((function(t){return t._id===e}));r&&"bun"===r.type&&(n+=2*r.price),r&&"bun"!==r.type&&(n+=r.price)})),n},et=function(e){return function(t){t({type:be});var n=Ye("accessToken");fetch(L+"/orders",{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(n)},body:JSON.stringify({ingredients:e})}).then((function(e){e&&e.ok?e.json().then((function(e){var n;t((n=e.order.number,{type:pe,number:n}))})):t({type:me})})).catch((function(){t({type:me})}))}},tt=function(){var e=v((function(e){return{ingredientIDs:e.burger.ingredientIDs,orderNumber:e.order.number,orderNumberRequest:e.order.orderNumberRequest,orderNumberFailed:e.order.orderNumberFailed}})),t=e.ingredientIDs,n=e.orderNumber,c=e.orderNumberRequest,a=e.orderNumberFailed,i=N();return Object(r.useEffect)((function(){i(et(t))}),[i,t]),c?Object(p.jsx)("h4",{className:"text text_type_main-medium mb-15 ".concat(Pe.a.order__text_type_centered),children:"\u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435 \u0437\u0430\u043a\u0430\u0437 \u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u0442\u0441\u044f"}):a?Object(p.jsx)("h4",{className:"text text_type_main-medium mb-15 ".concat(Pe.a.order__text_type_centered),children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u043d\u043e\u0432\u043e"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{className:"text text_type_digits-large ml-15 mr-15 mb-8 ".concat(Pe.a.order__number),children:n}),Object(p.jsx)("h4",{className:"text text_type_main-medium mb-15 ".concat(Pe.a.order__text_type_centered),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(p.jsx)("img",{className:Pe.a.order__done,src:qe,alt:"\u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),Object(p.jsx)("p",{className:"text text_type_main-default mt-15 mb-2 ".concat(Pe.a.order__text_type_centered),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(p.jsx)("p",{className:"text text_type_main-default ".concat(Pe.a.order__text_type_centered),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},nt=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],a=v((function(e){return{total:e.burger.total,user:e.auth.user}})),i=a.total,s=a.user,o=N(),l=Object(u.g)(),_=Object(p.jsx)(ze,{onClose:function(){c(!1),o({type:Oe})},children:Object(p.jsx)(tt,{})});return i?Object(p.jsxs)("div",{className:"".concat(Fe.a.constructor__total," mt-10 mb-9"),children:[Object(p.jsx)("p",{className:"".concat(Fe.a.constructor__price," text text_type_digits-medium"),children:i}),Object(p.jsx)(O.CurrencyIcon,{type:"primary"}),Object(p.jsx)(O.Button,{onClick:function(){s?c(!0):l.replace({pathname:"/login"})},type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),n&&_]}):null},rt=function(){return Object(p.jsxs)("section",{className:"".concat(Te.a.constructor," mr-5 pt-25 pr-4 pl-4"),children:[Object(p.jsx)(Re,{}),Object(p.jsx)(nt,{})]})},ct=function(){return Object(p.jsx)("main",{className:I.a.main,children:Object(p.jsxs)(C.a,{backend:T.a,children:[Object(p.jsx)(Ee,{}),Object(p.jsx)(rt,{})]})})},at=n(122),it=n.n(at),st=n(12),ot=n.n(st),ut=function(e){var t=e.children;return Object(p.jsx)("div",{className:ot.a.auth,children:t})},dt=n(94),lt=n.n(dt),_t=n(123),jt=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},bt=function(){var e=Object(_t.a)(lt.a.mark((function e(t,n){var r,c,a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return r=e.sent,e.next=6,jt(r);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=26;break}return e.next=14,fetch("".concat(L,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(jt);case 14:return c=e.sent,localStorage.setItem("refreshToken",c.refreshToken),Ke("accessToken",c.accessToken),n.headers.Authorization=c.accessToken,e.next=20,fetch(t,n);case 20:return a=e.sent,e.next=23,jt(a);case 23:return e.abrupt("return",e.sent);case 26:return e.abrupt("return",Promise.reject(e.t0));case 27:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),pt=function(e){return{type:G,user:e}},mt=function(){return{type:z}},Ot=function(){return{type:V}},ht=function(){return{type:$,passwordIsReset:!0}},ft=function(e){return{type:q,user:e}},xt=function(){return{type:H}},gt=function(e){return{type:W,user:e}},yt=function(){return{type:J}},vt=function(){return{type:Y,user:null}},Nt=function(){return{type:Z}},Et=function(){var e=Object(r.useState)("ShowIcon"),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)({email:"",password:""}),i=Object(d.a)(a,2),u=i[0],l=i[1],_=Object(r.useRef)(null),j=Object(s.b)(),b=Object(r.useCallback)((function(){_.current&&("password"===_.current.type?(_.current.type="text",c("HideIcon")):(_.current.type="password",c("ShowIcon")))}),[_]),m=Object(r.useCallback)((function(e){e.preventDefault(),j(function(e){return function(t){t(Ot()),fetch("".concat(L,"/auth/login"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((function(e){e&&e.ok?e.json().then((function(e){var n=e.accessToken.split(" ")[1];n&&e.refreshToken&&(Ke("accessToken",n),localStorage.setItem("refreshToken",e.refreshToken)),t(gt(e.user))})):t(yt())})).catch((function(){t(yt())}))}}(u))}),[j,u]);return Object(p.jsx)("div",{className:it.a.main,children:Object(p.jsxs)(ut,{children:[Object(p.jsxs)("form",{className:ot.a.form,onSubmit:m,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium mb-6 ".concat(ot.a.title),children:"\u0412\u0445\u043e\u0434"}),Object(p.jsx)(O.Input,{type:"email",placeholder:"E-mail",value:u.email,onChange:function(e){return Qe(e,l,u)},name:"email",size:"default"}),Object(p.jsx)(O.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:u.password,onChange:function(e){return Qe(e,l,u)},name:"password",icon:n,ref:_,onIconClick:b,size:"default"}),Object(p.jsx)(O.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(p.jsxs)("p",{className:"".concat(ot.a.auth__text," text text_type_main-default mt-4"),children:["\u0412\u044b \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(p.jsx)(o.b,{to:"/register",className:ot.a.auth__link,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("p",{className:"".concat(ot.a.auth__text," text text_type_main-default mt-4"),children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(p.jsx)(o.b,{to:"/forgot-password",className:ot.a.auth__link,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})},Ct=n(95),Tt=n.n(Ct),St=function(){return Object(p.jsxs)("div",{className:"".concat(Tt.a.notFound," text text_type_main-medium"),children:[Object(p.jsx)("h2",{className:"text text_type_digits-large text_color_inactive",children:"404"}),"\u0422\u0443\u0442 \u043f\u0443\u0441\u0442\u043e. ",Object(p.jsx)("br",{}),"\u0412\u0435\u0440\u043d\u0438\u0442\u0435\u0441\u044c \u043d\u0430\u0437\u0430\u0434 \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430",Object(p.jsx)(o.b,{className:Tt.a.link,to:"/react-burger/",children:"\u0413\u043b\u0430\u0432\u043d\u0443\u044e"})]})},It=n(43),kt=n.n(It),wt=function(){var e=Object(s.c)((function(e){return e.auth.user})),t=Object(r.useState)({email:"",password:"",name:""}),n=Object(d.a)(t,2),c=n[0],a=n[1],i=Object(s.b)(),l=Object(r.useCallback)((function(e){e.preventDefault(),i(function(e){return function(t){t({type:P}),fetch("".concat(L,"/auth/register"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((function(e){e&&e.ok?e.json().then((function(e){var n=e.accessToken.split(" ")[1];e.refreshToken&&n&&(Ke("accessToken",n),localStorage.setItem("refreshToken",e.refreshToken)),t(ft(e.user))})):t(xt())})).catch((function(){t(xt())}))}}(c))}),[i,c]);return Object(p.jsx)("div",{className:kt.a.main,children:e?Object(p.jsx)(u.a,{to:"/"}):Object(p.jsxs)(ut,{children:[Object(p.jsxs)("form",{className:ot.a.form,onSubmit:l,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium mb-6 ".concat(ot.a.title),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)(O.Input,{type:"text",placeholder:"\u0418\u043c\u044f",value:c.name,onChange:function(e){return Qe(e,a,c)},name:"name",size:"default"}),Object(p.jsx)(O.Input,{type:"email",placeholder:"E-mail",value:c.email,onChange:function(e){return Qe(e,a,c)},name:"email",size:"default"}),Object(p.jsx)(O.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:c.password,onChange:function(e){return Qe(e,a,c)},name:"password",icon:"ShowIcon",size:"default"}),Object(p.jsx)(O.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("p",{className:"".concat(ot.a.auth__text," text text_type_main-default mt-4"),children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(p.jsx)(o.b,{to:"/login",className:ot.a.auth__link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Rt=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,Dt=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(d.a)(a,2),l=i[0],_=i[1],j=Object(s.c)((function(e){return e.auth.passwordReset})),b=Object(s.b)(),m=Object(r.useCallback)((function(e){if(e.preventDefault(),n.match(Rt))try{b(function(e){return function(t){return bt("".concat(L,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:e})}).then((function(e){e.success&&"Reset email sent"===e.message&&t(ht())})).catch((function(e){return console.log(e)}))}}(n))}catch(e){console.log(e)}else _(!0)}),[b,n]);return j?Object(p.jsx)(u.a,{to:"/reset-password"}):Object(p.jsx)("div",{className:kt.a.main,children:Object(p.jsxs)(ut,{children:[Object(p.jsxs)("form",{className:ot.a.form,onSubmit:m,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium mb-6 ".concat(ot.a.title),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(O.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){c(e.target.value),l&&_(!1)},value:n,name:"email",error:l,errorText:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 email",size:"default"}),Object(p.jsx)(O.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(p.jsxs)("p",{className:"".concat(ot.a.auth__text," text text_type_main-default mt-4"),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(p.jsx)(o.b,{to:"/react-burger/login",className:ot.a.auth__link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Ft=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(d.a)(a,2),l=i[0],_=i[1],j=Object(r.useState)(!1),b=Object(d.a)(j,2),m=b[0],h=b[1],f=Object(r.useState)(!1),x=Object(d.a)(f,2),g=x[0],y=x[1],v=Object(s.b)(),N=Object(u.g)();return Object(s.c)((function(e){return e.auth.passwordReset}))?Object(p.jsx)("div",{className:kt.a.main,children:Object(p.jsxs)(ut,{children:[Object(p.jsxs)("form",{className:ot.a.form,onSubmit:function(e){if(e.preventDefault(),n&&l)try{v(function(e,t){return function(){bt("".concat(L,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({password:e,token:t})}).then(jt).catch((function(e){return console.log(e)}))}}(n,l)),v({type:$,passwordIsReset:!1}),N.replace({pathname:"/login"})}catch(e){console.log(e)}else m&&g||m?h(!0):y(!0)},children:[Object(p.jsx)("h2",{className:"text text_type_main-medium mb-6 ".concat(ot.a.title),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(O.Input,{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:n,onChange:function(e){c(e.target.value),h(!1)},name:"password",error:m,errorText:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",size:"default"}),Object(p.jsx)(O.Input,{type:void 0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:l,onChange:function(e){_(e.target.value),y(!1)},name:"code",error:g,errorText:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",size:"default"}),Object(p.jsx)(O.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(p.jsxs)("p",{className:"".concat(ot.a.auth__text," text text_type_main-default mt-4"),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(p.jsx)(o.b,{to:"/login",className:ot.a.auth__link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}):Object(p.jsx)(u.a,{to:"/forgot-password"})},At=n(27),Lt=n.n(At),Ut=n(45),Gt=n.n(Ut),zt=function(e){return e.current?e.current.classList.add("".concat(Gt.a.input_isActive)):null},Bt=function(e){return e.current?e.current.classList.remove("".concat(Gt.a.input_isActive)):null},Pt=function(e){return e.current?e.current.focus():null},qt=function(){var e=Object(r.useState)({name:"",login:"",password:""}),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(s.c)((function(e){return e.auth.user})),i=Object(r.useRef)(null),o=Object(r.useRef)(null),u=Object(r.useRef)(null),l=Object(s.b)(),_=Object(r.useCallback)((function(e){e.preventDefault(),a&&c(Object(g.a)(Object(g.a)({},n),{},{name:a.name,login:a.email,password:""}))}),[a,n]),j=Object(r.useCallback)((function(e){e.preventDefault();var t=Ye("accessToken");try{l(function(e,t){return function(n){bt("".concat(L,"/auth/user"),{method:"PATCH",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(!e.success)throw Error("Error user request");n(pt(e.user))})).catch((function(){n(mt())}))}}(n,t)),l({type:B,user:{name:n.name,login:n.login}})}catch(r){console.log(r)}}),[l,n]);return Object(r.useEffect)((function(){a&&c(Object(g.a)(Object(g.a)({},n),{},{name:a.name,login:a.email}))}),[]),Object(p.jsxs)("form",{className:Gt.a.inputs,onSubmit:j,children:[Object(p.jsx)(O.Input,{type:"text",placeholder:"\u0418\u043c\u044f",value:n.name,icon:"EditIcon",onChange:function(e){return Qe(e,c,n)},ref:i,name:"name",onFocus:function(){return zt(i)},onBlur:function(){return Bt(i)},onIconClick:function(){return Pt(i)},size:"default"}),Object(p.jsx)(O.Input,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",value:n.login,icon:"EditIcon",onChange:function(e){return Qe(e,c,n)},name:"login",ref:o,onFocus:function(){return zt(o)},onBlur:function(){return Bt(o)},onIconClick:function(){return Pt(o)},size:"default"}),Object(p.jsx)(O.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:n.password,icon:"EditIcon",onChange:function(e){return Qe(e,c,n)},name:"password",ref:u,onFocus:function(){return zt(u)},onBlur:function(){return Bt(u)},onIconClick:function(){return Pt(u)},size:"default"}),Object(p.jsxs)("div",{className:Gt.a.info_change,children:[Object(p.jsx)("span",{className:"text text_type_main-default ".concat(Gt.a.info_cancel),onClick:_,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(p.jsx)(O.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},Ht=n(124),Mt=n.n(Ht),Wt="WS_CONNECTION_START",Jt="WS_CONNECTION_SUCCESS",Vt="WS_CONNECTION_ERROR",Xt="WS_CONNECTION_CLOSED",Qt="WS_GET_MESSAGE",Kt=n(30),Yt=n(34),Zt=n.n(Yt),$t=n(57),en=n.n($t),tn=function(e){return{zIndex:e}},nn=function(e){var t=e.name,n=e.url,r=e.index,c=e.totalIngrds;return Object(p.jsxs)("div",{className:en.a.main,style:tn(r),children:[c&&Object(p.jsxs)("p",{className:"text text_type_digits-default ".concat(en.a.total_ingredients),children:["+",c]}),Object(p.jsx)("img",{className:c?en.a.image_background:en.a.image,src:n,alt:t})]})},rn=function(e){var t=e.id,n=e.number,c=e.name,a=e.date,i=e.ingredientsIDs,s=v((function(e){return e.ingredients.ingredients})),d=Object(u.h)(),l=Object(r.useCallback)((function(e,t,n,r,c){var a=e.find((function(e){return e._id===t}));return a&&c>6&&0===r?Object(p.jsx)(n,{name:a.name,url:a.image,index:r,totalIngrds:c-6},r):a&&Object(p.jsx)(n,{name:a.name,url:a.image,index:r},r)}),[]),_=Object(r.useCallback)((function(){var e=Object(Kt.a)(i);return e.length>6?e.slice(0,6):e}),[i]);return Object(p.jsxs)(o.b,{to:{pathname:"/feed/".concat(t),state:{background:d}},className:"pt-6 pb-6 pl-6 pr-6 mt-5 mr-4 ".concat(Zt.a.main),onClick:function(){return console.log(d)},children:[Object(p.jsxs)("p",{className:"text text_type_main-default pb-6 ".concat(Zt.a.order),children:["#",n," ",Object(p.jsx)("span",{className:"text_color_inactive ".concat(Zt.a.date),children:Ze(a)})]}),Object(p.jsx)("h3",{className:"text text_type_main-medium pb-6",children:c}),Object(p.jsxs)("div",{className:Zt.a.content,children:[Object(p.jsx)("div",{className:Zt.a.images,children:_().map((function(e,t){return l(s,e,nn,t,i.length)})).reverse()}),Object(p.jsxs)("p",{className:"text text_type_digits-default pl-6 ".concat(Zt.a.price),children:[$e(i,s),Object(p.jsx)("span",{className:Zt.a.price_icon,children:Object(p.jsx)(O.CurrencyIcon,{type:"primary"})})]})]})]})},cn=function(){var e=v((function(e){return e.userFeed.orders})),t=Ye("accessToken"),n=N();Object(r.useEffect)((function(){return n({type:Wt,payload:{url:"".concat(U,"?token=").concat(t)}}),function(){n({type:Xt})}}),[]);var c=e?e.map((function(e){var t=e._id,n=e.number,r=e.name,c=e.createdAt,a=e.ingredients;return Object(p.jsx)(rn,{id:t,number:n,name:r,date:c,ingredientsIDs:a},t)})):null;return Object(p.jsx)("div",{className:Mt.a.main,children:c})},an=function(){return"/react-burger/profile/orders"===Object(u.h)().pathname?Object(p.jsx)(cn,{}):Object(p.jsx)(qt,{})},sn=function(){var e=Object(s.c)((function(e){return e.auth.user})),t=Object(u.h)().pathname,n=Object(s.b)(),c=Object(r.useCallback)((function(e){return e===t?Lt.a.profile__link_isActive:Lt.a.profile__link}),[t]),a=Object(r.useCallback)((function(e){e.preventDefault(),n((function(e){e({type:P});var t=localStorage.getItem("refreshToken");fetch("".concat(L,"/auth/logout"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:t})}).then((function(t){t&&t.ok&&t.json().then((function(t){t.success?(Ke("accessToken",""),localStorage.removeItem("refreshToken"),e(vt())):e(Nt())}))})).catch((function(){e(Nt())}))}))}),[n]);return e?Object(p.jsxs)("div",{className:Lt.a.profile,children:[Object(p.jsxs)("ul",{className:"pl-5 ".concat(Lt.a.profile__list),children:[Object(p.jsx)("li",{className:Lt.a.profile__item,children:Object(p.jsx)(o.b,{to:"/react-burger/profile",className:"text text_type_main-medium ".concat(c("/profile")),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(p.jsx)("li",{className:Lt.a.profile__item,children:Object(p.jsx)(o.b,{to:"/react-burger/profile/orders",className:"text text_type_main-medium ".concat(c("/react-burger/profile/orders")," ").concat(Lt.a.profile__link),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(p.jsx)("li",{className:Lt.a.profile__item,children:Object(p.jsx)(o.b,{onClick:a,to:"/react-burger/",className:"text text_type_main-medium ".concat(Lt.a.profile__link),children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(p.jsx)(an,{})]}):null},on=n(25),un=n.n(on),dn=function(){var e=Object(s.c)((function(e){return e.ingredients.ingredients})),t=Object(r.useState)(),n=Object(d.a)(t,2),c=n[0],a=n[1],i=Object(u.i)().id;return Object(r.useEffect)((function(){a(e.filter((function(e){return e._id===i}))[0])}),[e,i]),e&&Object(p.jsxs)("div",{className:"".concat(un.a.content," pt-10 pb-15 pl-10 pr-10"),children:[Object(p.jsx)("h2",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(p.jsx)("img",{src:c&&c.image_large,alt:c&&c.name}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-4 mb-8 ml-25 mr-25",children:c&&c.name}),Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{className:"text text_type_main-default text_color_inactive",children:[Object(p.jsx)("th",{className:un.a.content__row,children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(p.jsx)("th",{className:un.a.content__row,children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(p.jsx)("th",{className:un.a.content__row,children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(p.jsx)("th",{className:un.a.content__row,children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"})]}),Object(p.jsxs)("tr",{className:"".concat(un.a.ingredient__details," text text_type_digits-default text_color_inactive"),children:[Object(p.jsx)("td",{className:un.a.content__row,children:c&&c.calories}),Object(p.jsx)("td",{className:un.a.content__row,children:c&&c.proteins}),Object(p.jsx)("td",{className:un.a.content__row,children:c&&c.fat}),Object(p.jsx)("td",{className:un.a.content__row,children:c&&c.carbohydrates})]})]})})]})},ln=n(54),_n=n.n(ln),jn=function(){var e=v((function(e){return e.feed.orders})),t=e?e.map((function(e){var t=e._id,n=e.number,r=e.name,c=e.createdAt,a=e.ingredients;return Object(p.jsx)(rn,{id:t,number:n,name:r,date:c,ingredientsIDs:a},t)})):null;return Object(p.jsx)("div",{className:_n.a.list,children:t})},bn=n(28),pn=n.n(bn),mn=function(e){var t=e.total,n=e.totalToday,r=e.orders,c=r.filter((function(e){return"done"===e.status})).slice(0,5),a=r.filter((function(e){return"done"!==e.status})).slice(0,5);return Object(p.jsxs)("section",{className:pn.a.main,children:[Object(p.jsxs)("div",{className:"mr-9",children:[Object(p.jsx)("h4",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(p.jsx)("ul",{className:pn.a.orders__list,children:c.map((function(e,t){return Object(p.jsx)("li",{className:"text text_type_digits-default ".concat(pn.a.orders__item_done),children:e.number},t)}))})]}),Object(p.jsxs)("div",{className:pn.a.orders,children:[Object(p.jsx)("h4",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(p.jsx)("ul",{className:pn.a.orders__list,children:a.map((function(e,t){return Object(p.jsx)("li",{className:"text text_type_digits-default ".concat(pn.a.orders__item),children:e.number},t)}))})]}),Object(p.jsxs)("div",{className:"text text_type_main-medium mt-10 mb-10",children:["\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{className:"text text_type_digits-large ".concat(pn.a.digits_shadow),children:t})]}),Object(p.jsxs)("div",{className:"text text_type_main-medium",children:["\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f ",Object(p.jsx)("br",{}),Object(p.jsx)("span",{className:"text text_type_digits-large ".concat(pn.a.digits_shadow),children:n})]})]})},On=function(){var e=Object(s.b)(),t=v((function(e){return e.feed.orders})),n=v((function(e){return{total:e.feed.total,totalToday:e.feed.totalToday}})),c=n.total,a=n.totalToday;return Object(r.useEffect)((function(){return e({type:Wt,payload:{url:"wss://norma.nomoreparties.space/orders/all"}}),function(){e({type:Xt})}}),[]),Object(p.jsxs)("div",{className:_n.a.main,children:[Object(p.jsx)("h2",{className:"text text_type_main-large pt-10",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsxs)("div",{className:_n.a.orders,children:[Object(p.jsx)(jn,{}),Object(p.jsx)(mn,{total:c,totalToday:a,orders:t})]})]})},hn=(n(35),n(96),n(125)),fn=n.n(hn),xn=function(){var e=Object(u.i)().id,t=v((function(t){return t.ingredients.ingredients.filter((function(t){return t._id===e}))[0]})),n=t.image_large,r=t.name,c=t.calories,a=t.proteins,i=t.fat,s=t.carbohydrates;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("img",{src:n,alt:r}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-4 mb-8 ml-25 mr-25",children:r}),Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{className:"text text_type_main-default text_color_inactive",children:[Object(p.jsx)("th",{children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(p.jsx)("th",{children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(p.jsx)("th",{children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(p.jsx)("th",{children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"})]}),Object(p.jsxs)("tr",{className:"".concat(fn.a.ingredient__details," text text_type_digits-default text_color_inactive"),children:[Object(p.jsx)("td",{children:c}),Object(p.jsx)("td",{children:a}),Object(p.jsx)("td",{children:i}),Object(p.jsx)("td",{children:s})]})]})})]})},gn=function(){return{type:ee}},yn=function(e){return{type:te,ingredients:e}},vn=function(){return{type:ne}};var Nn=function(){var e=Object(u.g)(),t=Object(u.h)(),n=N();Object(r.useEffect)((function(){var e=Ye("accessToken");n((function(e){gn(),fetch(L+"/ingredients").then((function(t){t&&t.ok?t.json().then((function(t){e(yn(t.data))})):vn()})).catch((function(){vn()}))})),n(function(e){return function(t){bt("".concat(L,"/auth/user"),{method:"GET",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}).then((function(e){if(!e.success)throw Error("Error user request");t(pt(e.user))})).catch((function(){t(mt())}))}}(e))}),[n]);var c=("PUSH"===e.action||"REPLACE"===e.action)&&t.state&&t.state.background;return Object(p.jsxs)(u.b,{path:"/react-burger/",children:[Object(p.jsx)(h,{}),Object(p.jsxs)("main",{className:x.a.main,children:[Object(p.jsxs)(u.d,{location:c||t,children:[Object(p.jsx)(u.b,{path:"/react-burger/",exact:!0,children:Object(p.jsx)(ct,{})}),Object(p.jsx)(E,{path:"/react-burger/login",exact:!0,children:Object(p.jsx)(Et,{})}),Object(p.jsx)(E,{path:"/react-burger/register",exact:!0,children:Object(p.jsx)(wt,{})}),Object(p.jsx)(E,{path:"/react-burger/forgot-password",exact:!0,children:Object(p.jsx)(Dt,{})}),Object(p.jsx)(E,{path:"/react-burger/reset-password",exact:!0,children:Object(p.jsx)(Ft,{})}),Object(p.jsx)(E,{path:"/react-burger/profile",exact:!0,children:Object(p.jsx)(sn,{})}),Object(p.jsx)(u.b,{path:"/react-burger/ingredients/:id",exact:!0,children:Object(p.jsx)(dn,{})}),Object(p.jsx)(u.b,{path:"/react-burger/feed",exact:!0,children:Object(p.jsx)(On,{})}),Object(p.jsx)(u.b,{children:Object(p.jsx)(St,{})})]}),c&&Object(p.jsx)(u.b,{path:"/react-burger/ingredients/:id",children:Object(p.jsx)(ze,{onClose:function(t){t.stopPropagation(),e.goBack()},children:Object(p.jsx)(xn,{})})})]})]})},En=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,222)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},Cn=n(31),Tn=n(126),Sn={ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1,activeTab:"\u0411\u0443\u043b\u043a\u0438"},In={bun:{},ingredients:[],total:0,ingredientIDs:[]},kn={image_large:"",name:"",calories:"",proteins:"",fat:"",carbohydrates:""},wn={number:void 0,orderNumberRequest:!1,orderNumberFailed:!1},Rn={user:null,userDataRequest:!0,userDataFailed:!1,passwordReset:!1},Dn={wsConnected:!1,orders:[],total:0,totalToday:0},Fn={wsConnected:!1,orders:[],total:0,totalToday:0},An=Object(Cn.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(g.a)(Object(g.a)({},e),{},{ingredientsRequest:!0,ingredientsFailed:!1});case te:return Object(g.a)(Object(g.a)({},e),{},{ingredients:t.ingredients.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{ingredientCount:0,ingredientOrderCount:0})})),ingredientsRequest:!1,ingredientsFailed:!1});case ne:return Object(g.a)(Object(g.a)({},e),{},{ingredientsFailed:!0});case re:return Object(g.a)(Object(g.a)({},e),{},{activeTab:t.tab});case ce:return Object(g.a)(Object(g.a)({},e),{},{ingredients:e.ingredients.map((function(e){return e._id===t.ingredientId?Object(g.a)(Object(g.a)({},e),{},{ingredientCount:e.ingredientCount+=1}):e}))});case ae:return Object(g.a)(Object(g.a)({},e),{},{ingredients:e.ingredients.map((function(e){return e._id===t.ingredientId?Object(g.a)(Object(g.a)({},e),{},{ingredientCount:e.ingredientCount-=1}):e}))});default:return e}},burger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:In,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return"bun"===t.ingredient.type?Object(g.a)(Object(g.a)({},e),{},{bun:t.ingredient}):Object(g.a)(Object(g.a)({},e),{},{ingredients:e.ingredients.concat(t.ingredient)});case se:return Object(g.a)(Object(g.a)({},e),{},{ingredients:e.ingredients.filter((function(e){return e._id===t.id&&e.index===t.index?null:e}))});case oe:return Object(g.a)(Object(g.a)({},e),{},{total:t.total});case ue:return Object(g.a)(Object(g.a)({},e),{},{ingredients:e.ingredients.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{index:t})}))});case de:return Object(g.a)(Object(g.a)({},e),{},{ingredientIDs:t.IDs});case le:var n=e.ingredients.filter((function(e){return e.index===t.index}))[0],r=Object(Kt.a)(e.ingredients);return r.splice(t.index,1),r.splice(t.atIndex,0,n),Object(g.a)(Object(g.a)({},e),{},{ingredients:r});default:return e}},details:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:return Object(g.a)({},t.details);case je:return kn;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return Object(g.a)(Object(g.a)({},e),{},{orderNumberRequest:!0});case pe:return Object(g.a)(Object(g.a)({},e),{},{orderNumberRequest:!1,orderNumberFailed:!1,number:t.number});case me:return Object(g.a)(Object(g.a)({},e),{},{orderNumberRequest:!1,orderNumberFailed:!0});case Oe:return wn;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(g.a)(Object(g.a)({},e),{},{user:t.user,userDataRequest:!1});case z:return Object(g.a)(Object(g.a)({},e),{},{userDataRequest:!1,userDataFailed:!0});case B:return Object(g.a)(Object(g.a)({},e),{},{user:t.user});case P:return Object(g.a)(Object(g.a)({},e),{},{userDataRequest:!0});case q:return Object(g.a)(Object(g.a)({},e),{},{user:t.user,userDataRequest:!1,userDataFailed:!1});case H:return Object(g.a)(Object(g.a)({},e),{},{userDataFailed:!0});case M:return Object(g.a)(Object(g.a)({},e),{},{userDataRequest:!0});case W:return Object(g.a)(Object(g.a)({},e),{},{user:t.user,userDataRequest:!1,userDataFailed:!1});case J:return Object(g.a)(Object(g.a)({},e),{},{userDataFailed:!0});case V:return Object(g.a)(Object(g.a)({},e),{},{userDataRequest:!0});case X:return Object(g.a)(Object(g.a)({},e),{},{userDataRequest:!1,userDataFailed:!1});case Q:return Object(g.a)(Object(g.a)({},e),{},{userDataFailed:!0});case K:return Object(g.a)(Object(g.a)({},e),{},{userDataRequest:!0});case Y:return Object(g.a)(Object(g.a)({},e),{},{user:t.user,userDataRequest:!1,userDataFailed:!1});case Z:return Object(g.a)(Object(g.a)({},e),{},{userDataFailed:!0});case $:return Object(g.a)(Object(g.a)({},e),{},{passwordReset:t.passwordIsReset});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jt:return Object(g.a)(Object(g.a)({},e),{},{error:void 0,wsConnected:!0});case Vt:return Object(g.a)(Object(g.a)({},e),{},{error:t.payload,wsConnected:!1});case Xt:return Object(g.a)(Object(g.a)({},e),{},{error:void 0,wsConnected:!1});case Qt:var n=t.payload,r=n.orders,c=n.total,a=n.totalToday;return Object(g.a)(Object(g.a)({},e),{},{error:void 0,orders:Object(Kt.a)(r),total:c,totalToday:a});default:return e}},userFeed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jt:return Object(g.a)(Object(g.a)({},e),{},{error:void 0,wsConnected:!0});case Vt:return Object(g.a)(Object(g.a)({},e),{},{error:t.payload,wsConnected:!1});case Xt:return Object(g.a)(Object(g.a)({},e),{},{error:void 0,wsConnected:!1});case Qt:var n=t.payload.orders;return Object(g.a)(Object(g.a)({},e),{},{error:void 0,orders:Object(Kt.a)(n.reverse())});default:return e}}}),Ln=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Cn.c)(Object(Cn.a)((function(e){var t=null;return function(n){return function(r){var c,a,i=e.dispatch,s=r.type;if(s===Wt){var o=r.payload;t=new WebSocket(o.url)}1===(null===(c=t)||void 0===c?void 0:c.readyState)&&s===Xt&&(null===(a=t)||void 0===a||a.close()),t&&(t.onopen=function(){i({type:Jt})},t.onerror=function(e){i({type:Vt,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=n.success,c=Object(y.a)(n,["success"]);r&&i({type:Qt,payload:c})},t.onclose=function(e){i({type:Xt,payload:e}),e.wasClean?console.log("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u043e - \u043a\u043e\u0434 ".concat(e.code)):console.log("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u043e \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e. \u041a\u043e\u0434 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f - ".concat(e.code))}),n(r)}}}),Tn.a)),Un=Object(Cn.d)(An,Ln);i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(s.a,{store:Un,children:Object(p.jsx)(o.a,{children:Object(p.jsx)(Nn,{})})})}),document.getElementById("root")),En()},25:function(e,t,n){e.exports={content:"ingredient_content__2wfoi",content__row:"ingredient_content__row__1nruG"}},27:function(e,t,n){e.exports={profile:"profile_profile__3ILEA",profile__list:"profile_profile__list__29WJM",profile__item:"profile_profile__item__VS3tE",profile__link:"profile_profile__link__31dwo",profile__link_isActive:"profile_profile__link_isActive__2ETcy"}},28:function(e,t,n){e.exports={main:"orders_main__3Akh7",orders:"orders_orders__G9wk0",orders__list:"orders_orders__list__2qpc7",orders__item:"orders_orders__item__3-_r8",orders__item_done:"orders_orders__item_done__3b0ea",digits_shadow:"orders_digits_shadow__1gDhh"}},33:function(e,t,n){e.exports={order__number:"order-details_order__number__g-Ijp",order__text_type_centered:"order-details_order__text_type_centered__3PJ2m",order__done:"order-details_order__done__7rqou"}},34:function(e,t,n){e.exports={main:"feed-order_main__1r59F",order:"feed-order_order__37rFE",date:"feed-order_date__38zoS",content:"feed-order_content__1WTk-",images:"feed-order_images__3VMfy",image:"feed-order_image__yTNAJ",price:"feed-order_price__2D46_",price_icon:"feed-order_price_icon__3Uwpl"}},35:function(e,t,n){e.exports={main:"order_main__389Vy",number:"order_number__2AdHP",status:"order_status__3ZdKQ",order:"order_order__R161H",ingredients:"order_ingredients__3tnMK",data:"order_data__4p_FN",price:"order_price__CU2Ms"}},37:function(e,t,n){e.exports={commonList:"constructor-list_commonList__1nC8T",bothSides:"constructor-list_bothSides__Wbksy",constructorList:"constructor-list_constructorList__3Xp6w",item:"constructor-list_item__34E6w"}},38:function(e,t,n){e.exports={popup__overlay:"popup_popup__overlay__3Irdv",popup__content:"popup_popup__content__2rz1q",popup__base:"popup_popup__base__2xfxg",popup__cross:"popup_popup__cross__1aBBL",popup__text_type_centered:"popup_popup__text_type_centered__33PIb",popup__title:"popup_popup__title__2Cb17"}},43:function(e,t,n){e.exports={main:"register_main__425LN"}},44:function(e,t,n){e.exports={header:"app-header_header__1iHLW",header__nav:"app-header_header__nav__1wJFs",header__list:"app-header_header__list__3y_7Q",header__logo:"app-header_header__logo__27E10",header__link:"app-header_header__link__Qgbfo"}},45:function(e,t,n){e.exports={inputs:"profile-edit_inputs__nd_Z9",input_isActive:"profile-edit_input_isActive__W48N2",info_change:"profile-edit_info_change__1Hmmg",info_cancel:"profile-edit_info_cancel__1HjpM"}},54:function(e,t,n){e.exports={main:"feed_main__3HiF9",orders:"feed_orders__hw0P4",list:"feed_list__2Cndy"}},55:function(e,t,n){e.exports={ingredients:"ingredients_ingredients__BIdYV",ingredients__list:"ingredients_ingredients__list__3bYsD"}},56:function(e,t,n){e.exports={ingredient:"ingredient_ingredient__1cRdv",ingredient__priceWrapper:"ingredient_ingredient__priceWrapper__1lBHr",ingredient__price:"ingredient_ingredient__price__11emp",ingredient__name:"ingredient_ingredient__name__1un8n"}},57:function(e,t,n){e.exports={main:"circle-ingredient_main__Rakh0",image:"circle-ingredient_image__320JN",image_background:"circle-ingredient_image_background__1awif",total_ingredients:"circle-ingredient_total_ingredients__1usbO"}},69:function(e,t,n){e.exports={header__item:"app-header-item_header__item__3wD1r",header__iconWrapper:"app-header-item_header__iconWrapper__21pc-",header__link:"app-header-item_header__link__3HjHB"}},70:function(e,t,n){e.exports={ingredients:"burger-ingredients_ingredients__2TY9H",ingredients__loading:"burger-ingredients_ingredients__loading__15n-p"}},92:function(e,t,n){e.exports={constructor__total:"constructor-cart_constructor__total__3U_YT",constructor__price:"constructor-cart_constructor__price__3TReF"}},95:function(e,t,n){e.exports={notFound:"notFound_notFound__3Xw7x",link:"notFound_link__2p8uk"}},96:function(e,t,n){e.exports={main:"order-ingredient_main__1Ix9O",price:"order-ingredient_price__33FAt"}}},[[210,1,2]]]);
//# sourceMappingURL=main.06379e41.chunk.js.map